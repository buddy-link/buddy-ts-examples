(()=>{var e={};e.id=931,e.ids=[931],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},43637:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,originalPathname:()=>h,pages:()=>l,routeModule:()=>f,tree:()=>u}),r(43395),r(25527),r(35866);var i=r(23191),n=r(88716),o=r(37922),a=r.n(o),s=r(95231),d={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>s[e]);r.d(t,d);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43395)),"/Users/rafael/work/buddy-link/buddy-ts-examples/next/sponsaru/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,25527)),"/Users/rafael/work/buddy-link/buddy-ts-examples/next/sponsaru/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/rafael/work/buddy-link/buddy-ts-examples/next/sponsaru/src/app/page.tsx"],h="/page",c={require:r,loadChunk:()=>Promise.resolve()},f=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},83907:(e,t,r)=>{Promise.resolve().then(r.bind(r,7468))},43862:(e,t,r)=>{var i=r(96031);e.exports=function(e,t){if(!i(e))throw Error("graphology-generators/random/clusters: invalid Graph constructor.");var r,n,o,a="clusterDensity"in(t=t||{})?t.clusterDensity:.5,s=t.rng||Math.random,d=t.order,u=t.size,l=t.clusters;if("number"!=typeof a||a>1||a<0)throw Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if("function"!=typeof s)throw Error("graphology-generators/random/clusters: `rng` option should be a function.");if("number"!=typeof d||d<=0)throw Error("graphology-generators/random/clusters: `order` option should be a positive number.");if("number"!=typeof u||u<=0)throw Error("graphology-generators/random/clusters: `size` option should be a positive number.");if("number"!=typeof l||l<=0)throw Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var h=new e;if(!d)return h;var c,f,p,g=Array(l);for(p=0;p<l;p++)g[p]=[];for(p=0;p<d;p++)c=s()*l|0,h.addNode(p,{cluster:c}),g[c].push(p);if(!u)return h;for(p=0;p<u;p++){if(s()<1-a){r=s()*d|0;do n=s()*d|0;while(r===n)}else{if(!(o=(f=g[c=s()*l|0]).length)||o<2)continue;r=f[s()*o|0];do n=f[s()*o|0];while(r===n)}h.multi?h.addEdge(r,n):h.mergeEdge(r,n)}return h}},11272:(e,t,r)=>{var i=r(87470),n=r(14119),o=r(9980),a={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function s(e,t,r,i,n){this.wrappedCircle=n||null,this.children={},this.countChildren=0,this.id=e||null,this.next=null,this.previous=null,this.x=t||null,this.y=r||null,n?this.r=1010101:this.r=i||999}function d(e,t){var r=e.r-t.r,i=t.x-e.x,n=t.y-e.y;return r<0||r*r<i*i+n*n}function u(e,t){var r=e.r-t.r+1e-6,i=t.x-e.x,n=t.y-e.y;return r>0&&r*r>i*i+n*n}function l(e,t){for(var r=0;r<t.length;++r)if(!u(e,t[r]))return!1;return!0}function h(e,t){var r=e.x,i=e.y,n=e.r,o=t.x,a=t.y,d=t.r,u=o-r,l=a-i,h=d-n,c=Math.sqrt(u*u+l*l);return new s(null,(r+o+u/c*h)/2,(i+a+l/c*h)/2,(c+n+d)/2)}function c(e,t,r){var i=e.x,n=e.y,o=e.r,a=t.x,d=t.y,u=t.r,l=r.x,h=r.y,c=r.r,f=i-a,p=i-l,g=n-d,m=n-h,v=u-o,y=c-o,b=i*i+n*n-o*o,x=b-a*a-d*d+u*u,w=b-l*l-h*h+c*c,E=p*g-f*m,_=(g*w-m*x)/(2*E)-i,C=(m*v-g*y)/E,k=(p*x-f*w)/(2*E)-n,A=(f*y-p*v)/E,S=C*C+A*A-1,T=2*(o+_*C+k*A),N=_*_+k*k-o*o,R=-(S?(T+Math.sqrt(T*T-4*S*N))/(2*S):N/T);return new s(null,i+_+C*R,n+k+A*R,R)}function f(e){var t=e.wrappedCircle,r=e.next.wrappedCircle,i=t.r+r.r,n=(t.x*r.r+r.x*t.r)/i,o=(t.y*r.r+r.y*t.r)/i;return n*n+o*o}function p(e,t,r){var i,n,o,a,s=e.x-t.x,d=e.y-t.y,u=s*s+d*d;u?(n=t.r+r.r,n*=n,a=e.r+r.r,n>(a*=a)?(i=(u+a-n)/(2*u),o=Math.sqrt(Math.max(0,a/u-i*i)),r.x=e.x-i*s-o*d,r.y=e.y-i*d+o*s):(i=(u+n-a)/(2*u),o=Math.sqrt(Math.max(0,n/u-i*i)),r.x=t.x+i*s-o*d,r.y=t.y+i*d+o*s)):(r.x=t.x+r.r,r.y=t.y)}function g(e,t){var r=e.r+t.r-1e-6,i=t.x-e.x,n=t.y-e.y;return r>0&&r*r>i*i+n*n}function m(e,t,r){if(!n(t))throw Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");r=i(r,a);var m={},v={},y=t.nodes(),b=r.center,x=r.hierarchyAttributes,w=o.createShuffleInPlace(r.rng),E=r.scale,_=new s;t.forEachNode(function(e,t){var r=new s(e,null,null,t.size?t.size:1),i=_;x.forEach(function(e){var r=t[e];i=i.getChild(r)}),i.addChild(e,r)}),function(e,t){for(var r in function e(t,r){var i=0;if(t.hasChildren()){for(var n in t.children){var o=t.children[n];o.hasChildren()&&(o.r=e(o,r))}i=function(e,t){var r,i,n,o,a,m,v,y,b,x,w=e.length;if(0===w)return 0;if((r=e[0]).x=0,r.y=0,w<=1)return r.r;if(i=e[1],r.x=-i.r,i.x=r.r,i.y=0,w<=2)return r.r+i.r;p(i,r,n=e[2]),r=new s(null,null,null,null,r),i=new s(null,null,null,null,i),n=new s(null,null,null,null,n),r.next=n.previous=i,i.next=r.previous=n,n.next=i.previous=r;e:for(m=3;m<w;++m){n=e[m],p(r.wrappedCircle,i.wrappedCircle,n),n=new s(null,null,null,null,n),v=i.next,y=r.previous,b=i.wrappedCircle.r,x=r.wrappedCircle.r;do if(b<=x){if(g(v.wrappedCircle,n.wrappedCircle)){i=v,r.next=i,i.previous=r,--m;continue e}b+=v.wrappedCircle.r,v=v.next}else{if(g(y.wrappedCircle,n.wrappedCircle)){(r=y).next=i,i.previous=r,--m;continue e}x+=y.wrappedCircle.r,y=y.previous}while(v!==y.next);for(n.previous=r,n.next=i,r.next=i.previous=i=n,o=f(r);(n=n.next)!==i;)(a=f(n))<o&&(r=n,o=a);i=r.next}r=[i.wrappedCircle],n=i;for(var E=1e4;(n=n.next)!==i&&0!=--E;)r.push(n.wrappedCircle);for(m=0,n=function(e,t){var r,i,n=0,o=e.slice(),a=e.length,f=[];for(t(o);n<a;)r=o[n],i&&u(i,r)?++n:(i=function(e){switch(e.length){case 1:var t;return new s(null,(t=e[0]).x,t.y,t.r);case 2:return h(e[0],e[1]);case 3:return c(e[0],e[1],e[2]);default:throw Error("graphology-layout/circlepack: Invalid basis length "+e.length)}}(f=function(e,t){var r,i;if(l(t,e))return[t];for(r=0;r<e.length;++r)if(d(t,e[r])&&l(h(e[r],t),e))return[e[r],t];for(r=0;r<e.length-1;++r)for(i=r+1;i<e.length;++i)if(d(h(e[r],e[i]),t)&&d(h(e[r],t),e[i])&&d(h(e[i],t),e[r])&&l(c(e[r],e[i],t),e))return[e[r],e[i],t];throw Error("graphology-layout/circlepack: extendBasis failure !")}(f,r)),n=0);return i}(r,t);m<w;++m)r=e[m],r.x-=n.x,r.y-=n.y;return n.r}(Object.values(t.children),r)}return i}(e,t),e.children)e.children[r].applyPositionToChildren()}(_,w),function e(t,r,i){for(var n in r.children){var o=r.children[n];o.hasChildren()?e(t,o,i):i[o.id]={x:o.x,y:o.y}}}(t,_,m);var C,k,A,S=y.length;for(A=0;A<S;A++){var T=y[A];C=b+E*m[T].x,k=b+E*m[T].y,v[T]={x:C,y:k},e&&(t.setNodeAttribute(T,r.attributes.x,C),t.setNodeAttribute(T,r.attributes.y,k))}return v}s.prototype.hasChildren=function(){return this.countChildren>0},s.prototype.addChild=function(e,t){this.children[e]=t,++this.countChildren},s.prototype.getChild=function(e){if(!this.children.hasOwnProperty(e)){var t=new s;this.children[e]=t,++this.countChildren}return this.children[e]},s.prototype.applyPositionToChildren=function(){if(this.hasChildren())for(var e in this.children){var t=this.children[e];t.x+=this.x,t.y+=this.y,t.applyPositionToChildren()}};var v=m.bind(null,!1);v.assign=m.bind(null,!0),e.exports=v},87470:e=>{e.exports=function e(t,r){t=t||{};var i={};for(var n in r){var o=t[n],a=r[n];if(!(!a||"object"!=typeof a||"function"==typeof a||Array.isArray(a)||a instanceof Set||a instanceof Map||a instanceof RegExp||a instanceof Date)){i[n]=e(o,a);continue}void 0===o?i[n]=a:i[n]=o}return i}},96031:e=>{e.exports=function(e){return null!==e&&"function"==typeof e&&"object"==typeof e.prototype&&"function"==typeof e.prototype.addUndirectedEdgeWithKey&&"function"==typeof e.prototype.dropNode}},14119:e=>{e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},36126:(e,t,r)=>{var i=r(82363),n=r(63005);e.exports=function(){var e=arguments,t=null,r=-1;return new i(function(){for(var i=null;;){if(null===t){if(++r>=e.length)return{done:!0};t=n(e[r])}if(!0===(i=t.next()).done){t=null;continue}break}return i})}},63005:(e,t,r)=>{var i=r(82363),n=r(4990),o=n.ARRAY_BUFFER_SUPPORT,a=n.SYMBOL_SUPPORT;e.exports=function(e){var t="string"==typeof e||Array.isArray(e)||o&&ArrayBuffer.isView(e)?i.fromSequence(e):"object"!=typeof e||null===e?null:a&&"function"==typeof e[Symbol.iterator]?e[Symbol.iterator]():"function"==typeof e.next?e:null;if(!t)throw Error("obliterator: target is not iterable nor a valid iterator.");return t}},82363:e=>{function t(e){if("function"!=typeof e)throw Error("obliterator/iterator: expecting a function!");this.next=e}"undefined"!=typeof Symbol&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,r=e.length,i=0;return new t(function(){return i>=r?{done:!0}:{done:!1,value:e[i++]}})},t.empty=function(){return new t(function(){return{done:!0}})},t.fromSequence=function(e){var r=0,i=e.length;return new t(function(){return r>=i?{done:!0}:{done:!1,value:e[r++]}})},t.is=function(e){return e instanceof t||"object"==typeof e&&null!==e&&"function"==typeof e.next},e.exports=t},4990:(e,t)=>{t.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,t.SYMBOL_SUPPORT="undefined"!=typeof Symbol},97500:(e,t,r)=>{var i=r(63005);e.exports=function(e,t){for(var r,n=arguments.length>1?t:1/0,o=n!==1/0?Array(n):[],a=0,s=i(e);;){if(a===n)return o;if((r=s.next()).done)return a!==t&&(o.length=a),o;o[a++]=r.value}}},98304:e=>{function t(e){return function(t,r){return t+Math.floor(e()*(r-t+1))}}var r=t(Math.random);r.createRandom=t,e.exports=r},9980:(e,t,r)=>{var i=r(98304).createRandom;function n(e){var t=i(e);return function(e){for(var r=e.length,i=r-1,n=-1;++n<r;){var o=t(n,i),a=e[o];e[o]=e[n],e[n]=a}}}var o=n(Math.random);o.createShuffleInPlace=n,e.exports=o},22918:(e,t,r)=>{var i=r(92288),n=r(70594),o=r(5009),a=r(43498),s=r(27992),d=r(36348),u=r(56551);u.alea=i,u.xor128=n,u.xorwow=o,u.xorshift7=a,u.xor4096=s,u.tychei=d,e.exports=u},92288:function(e,t,r){var i;!function(e,n,o){function a(e){var t,r=this,i=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var i=.02519603282416938*(t+=e.charCodeAt(r));t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=4294967296*i}return(t>>>0)*23283064365386963e-26});r.next=function(){var e=2091639*r.s0+23283064365386963e-26*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=i(" "),r.s1=i(" "),r.s2=i(" "),r.s0-=i(e),r.s0<0&&(r.s0+=1),r.s1-=i(e),r.s1<0&&(r.s1+=1),r.s2-=i(e),r.s2<0&&(r.s2+=1)}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function d(e,t){var r=new a(e),i=t&&t.state,n=r.next;return n.int32=function(){return 4294967296*r.next()|0},n.double=function(){return n()+(2097152*n()|0)*11102230246251565e-32},n.quick=n,i&&("object"==typeof i&&s(i,r),n.state=function(){return s(r,{})}),n}n&&n.exports?n.exports=d:r.amdD&&r.amdO?void 0!==(i=(function(){return d}).call(t,r,t,n))&&(n.exports=i):this.alea=d}(0,e=r.nmd(e),r.amdD)},36348:function(e,t,r){var i;!function(e,n,o){function a(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,i=t.d,n=t.a;return e=e<<25^e>>>7^r,r=r-i|0,i=i<<24^i>>>8^n,n=n-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-i|0,t.d=i<<16^r>>>16^n,t.a=n-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var i=0;i<r.length+20;i++)t.b^=0|r.charCodeAt(i),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function d(e,t){var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&s(i,r),n.state=function(){return s(r,{})}),n}n&&n.exports?n.exports=d:r.amdD&&r.amdO?void 0!==(i=(function(){return d}).call(t,r,t,n))&&(n.exports=i):this.tychei=d}(0,e=r.nmd(e),r.amdD)},70594:function(e,t,r){var i;!function(e,n,o){function a(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var i=0;i<r.length+64;i++)t.x^=0|r.charCodeAt(i),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function d(e,t){var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&s(i,r),n.state=function(){return s(r,{})}),n}n&&n.exports?n.exports=d:r.amdD&&r.amdO?void 0!==(i=(function(){return d}).call(t,r,t,n))&&(n.exports=i):this.xor128=d}(0,e=r.nmd(e),r.amdD)},27992:function(e,t,r){var i;!function(e,n,o){function a(e){var t=this;t.next=function(){var e,r,i=t.w,n=t.X,o=t.i;return t.w=i=i+1640531527|0,r=n[o+34&127],e=n[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=n[o]=r^e,t.i=o,r+(i^i>>>16)|0},function(e,t){var r,i,n,o,a,s=[],d=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,d=Math.max(d,t.length)),n=0,o=-32;o<d;++o)t&&(i^=t.charCodeAt((o+32)%t.length)),0===o&&(a=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,o>=0&&(a=a+1640531527|0,n=0==(r=s[127&o]^=i+a)?n+1:0);for(n>=128&&(s[127&(t&&t.length||0)]=-1),n=127,o=512;o>0;--o)i=s[n+34&127],r=s[n=n+1&127],i^=i<<13,r^=r<<17,i^=i>>>15,r^=r>>>12,s[n]=i^r;e.w=a,e.X=s,e.i=n}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function d(e,t){null==e&&(e=+new Date);var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&(i.X&&s(i,r),n.state=function(){return s(r,{})}),n}n&&n.exports?n.exports=d:r.amdD&&r.amdO?void 0!==(i=(function(){return d}).call(t,r,t,n))&&(n.exports=i):this.xor4096=d}(0,e=r.nmd(e),r.amdD)},43498:function(e,t,r){var i;!function(e,n,o){function a(e){var t=this;t.next=function(){var e,r,i=t.x,n=t.i;return e=i[n],e^=e>>>7,r=e^e<<24^((e=i[n+1&7])^e>>>10)^((e=i[n+3&7])^e>>>3)^((e=i[n+4&7])^e<<7),e=i[n+7&7],e^=e<<13,r^=e^e<<9,i[n]=r,t.i=n+1&7,r},function(e,t){var r,i=[];if(t===(0|t))i[0]=t;else for(r=0,t=""+t;r<t.length;++r)i[7&r]=i[7&r]<<15^t.charCodeAt(r)+i[r+1&7]<<13;for(;i.length<8;)i.push(0);for(r=0;r<8&&0===i[r];++r);for(8==r?i[7]=-1:i[r],e.x=i,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function d(e,t){null==e&&(e=+new Date);var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&(i.x&&s(i,r),n.state=function(){return s(r,{})}),n}n&&n.exports?n.exports=d:r.amdD&&r.amdO?void 0!==(i=(function(){return d}).call(t,r,t,n))&&(n.exports=i):this.xorshift7=d}(0,e=r.nmd(e),r.amdD)},5009:function(e,t,r){var i;!function(e,n,o){function a(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var i=0;i<r.length+64;i++)t.x^=0|r.charCodeAt(i),i==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function d(e,t){var r=new a(e),i=t&&t.state,n=function(){return(r.next()>>>0)/4294967296};return n.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/2097152;while(0===e);return e},n.int32=r.next,n.quick=n,i&&("object"==typeof i&&s(i,r),n.state=function(){return s(r,{})}),n}n&&n.exports?n.exports=d:r.amdD&&r.amdO?void 0!==(i=(function(){return d}).call(t,r,t,n))&&(n.exports=i):this.xorwow=d}(0,e=r.nmd(e),r.amdD)},56551:function(e,t,r){var i;!function(n,o,a){var s,d=a.pow(256,6),u=a.pow(2,52),l=2*u;function h(e,t,r){var i=[],h=p(function e(t,r){var i,n=[],o=typeof t;if(r&&"object"==o)for(i in t)try{n.push(e(t[i],r-1))}catch(e){}return n.length?n:"string"==o?t:t+"\0"}((t=!0==t?{entropy:!0}:t||{}).entropy?[e,g(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(256):(e=new Uint8Array(256),(n.crypto||n.msCrypto).getRandomValues(e)),g(e)}catch(e){var t=n.navigator,r=t&&t.plugins;return[+new Date,n,r,n.screen,g(o)]}}():e,3),i),m=new c(i),v=function(){for(var e=m.g(6),t=d,r=0;e<u;)e=(e+r)*256,t*=256,r=m.g(1);for(;e>=l;)e/=2,t/=2,r>>>=1;return(e+r)/t};return v.int32=function(){return 0|m.g(4)},v.quick=function(){return m.g(4)/4294967296},v.double=v,p(g(m.S),o),(t.pass||r||function(e,t,r,i){return(i&&(i.S&&f(i,m),e.state=function(){return f(m,{})}),r)?(a.random=e,t):e})(v,h,"global"in t?t.global:this==a,t.state)}function c(e){var t,r=e.length,i=this,n=0,o=i.i=i.j=0,a=i.S=[];for(r||(e=[r++]);n<256;)a[n]=n++;for(n=0;n<256;n++)a[n]=a[o=255&o+e[n%r]+(t=a[n])],a[o]=t;(i.g=function(e){for(var t,r=0,n=i.i,o=i.j,a=i.S;e--;)t=a[n=255&n+1],r=256*r+a[255&(a[n]=a[o=255&o+t])+(a[o]=t)];return i.i=n,i.j=o,r})(256)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var r,i=e+"",n=0;n<i.length;)t[255&n]=255&(r^=19*t[255&n])+i.charCodeAt(n++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(p(a.random(),o),e.exports){e.exports=h;try{s=r(6113)}catch(e){}}else void 0!==(i=(function(){return h}).call(t,r,t,e))&&(e.exports=i)}("undefined"!=typeof self?self:this,[],Math)},7468:(e,t,r)=>{"use strict";r.d(t,{default:()=>i7});var i,n=r(10326),o=r(17577),a=r(51223);let s=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let d=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let u=o.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));u.displayName="CardTitle",o.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let l=o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...t}));l.displayName="CardContent",o.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var h=r(95105),c=r(45353),f=r(82561),p=r(93095),g=r(48051),m=r(34214),v=r(88957),y=r(45226),b=r(55049),x=r(52067);let w=(0,o.createContext)(void 0);function E(e){let t=(0,o.useContext)(w);return e||t||"ltr"}let _="rovingFocusGroup.onEntryFocus",C={bubbles:!1,cancelable:!0},k="RovingFocusGroup",[A,S,T]=function(e){let t=e+"CollectionProvider",[r,i]=(0,p.b)(t),[n,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=e+"CollectionSlot",d=o.forwardRef((e,t)=>{let{scope:r,children:i}=e,n=a(s,r),d=(0,g.e)(t,n.collectionRef);return o.createElement(m.g7,{ref:d},i)}),u=e+"CollectionItemSlot",l="data-radix-collection-item";return[{Provider:e=>{let{scope:t,children:r}=e,i=o.useRef(null),a=o.useRef(new Map).current;return o.createElement(n,{scope:t,itemMap:a,collectionRef:i},r)},Slot:d,ItemSlot:o.forwardRef((e,t)=>{let{scope:r,children:i,...n}=e,s=o.useRef(null),d=(0,g.e)(t,s),h=a(u,r);return o.useEffect(()=>(h.itemMap.set(s,{ref:s,...n}),()=>void h.itemMap.delete(s))),o.createElement(m.g7,{[l]:"",ref:d},i)})},function(t){let r=a(e+"CollectionConsumer",t);return o.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${l}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},i]}(k),[N,R]=(0,p.b)(k,[T]),[L,D]=N(k),G=(0,o.forwardRef)((e,t)=>(0,o.createElement)(A.Provider,{scope:e.__scopeRovingFocusGroup},(0,o.createElement)(A.Slot,{scope:e.__scopeRovingFocusGroup},(0,o.createElement)(F,(0,c.Z)({},e,{ref:t}))))),F=(0,o.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:i,loop:n=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:u,onEntryFocus:l,...h}=e,p=(0,o.useRef)(null),m=(0,g.e)(t,p),v=E(a),[w=null,k]=(0,x.T)({prop:s,defaultProp:d,onChange:u}),[A,T]=(0,o.useState)(!1),N=(0,b.W)(l),R=S(r),D=(0,o.useRef)(!1),[G,F]=(0,o.useState)(0);return(0,o.useEffect)(()=>{let e=p.current;if(e)return e.addEventListener(_,N),()=>e.removeEventListener(_,N)},[N]),(0,o.createElement)(L,{scope:r,orientation:i,dir:v,loop:n,currentTabStopId:w,onItemFocus:(0,o.useCallback)(e=>k(e),[k]),onItemShiftTab:(0,o.useCallback)(()=>T(!0),[]),onFocusableItemAdd:(0,o.useCallback)(()=>F(e=>e+1),[]),onFocusableItemRemove:(0,o.useCallback)(()=>F(e=>e-1),[])},(0,o.createElement)(y.WV.div,(0,c.Z)({tabIndex:A||0===G?-1:0,"data-orientation":i},h,{ref:m,style:{outline:"none",...e.style},onMouseDown:(0,f.M)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,f.M)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!A){let t=new CustomEvent(_,C);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=R().filter(e=>e.focusable);M([e.find(e=>e.active),e.find(e=>e.id===w),...e].filter(Boolean).map(e=>e.ref.current))}}D.current=!1}),onBlur:(0,f.M)(e.onBlur,()=>T(!1))})))}),j=(0,o.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:i=!0,active:n=!1,tabStopId:a,...s}=e,d=(0,v.M)(),u=a||d,l=D("RovingFocusGroupItem",r),h=l.currentTabStopId===u,p=S(r),{onFocusableItemAdd:g,onFocusableItemRemove:m}=l;return(0,o.useEffect)(()=>{if(i)return g(),()=>m()},[i,g,m]),(0,o.createElement)(A.ItemSlot,{scope:r,id:u,focusable:i,active:n},(0,o.createElement)(y.WV.span,(0,c.Z)({tabIndex:h?0:-1,"data-orientation":l.orientation},s,{ref:t,onMouseDown:(0,f.M)(e.onMouseDown,e=>{i?l.onItemFocus(u):e.preventDefault()}),onFocus:(0,f.M)(e.onFocus,()=>l.onItemFocus(u)),onKeyDown:(0,f.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){l.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var i;let n=(i=e.key,"rtl"!==r?i:"ArrowLeft"===i?"ArrowRight":"ArrowRight"===i?"ArrowLeft":i);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return z[n]}(e,l.orientation,l.dir);if(void 0!==t){e.preventDefault();let r=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let i=r.indexOf(e.currentTarget);r=l.loop?function(e,t){return e.map((r,i)=>e[(t+i)%e.length])}(r,i+1):r.slice(i+1)}setTimeout(()=>M(r))}})})))}),z={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function M(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}var P=r(9815);let I="Tabs",[O,U]=(0,p.b)(I,[R]),$=R(),[B,W]=O(I),H=(0,o.forwardRef)((e,t)=>{let{__scopeTabs:r,value:i,onValueChange:n,defaultValue:a,orientation:s="horizontal",dir:d,activationMode:u="automatic",...l}=e,h=E(d),[f,p]=(0,x.T)({prop:i,onChange:n,defaultProp:a});return(0,o.createElement)(B,{scope:r,baseId:(0,v.M)(),value:f,onValueChange:p,orientation:s,dir:h,activationMode:u},(0,o.createElement)(y.WV.div,(0,c.Z)({dir:h,"data-orientation":s},l,{ref:t})))}),V=(0,o.forwardRef)((e,t)=>{let{__scopeTabs:r,loop:i=!0,...n}=e,a=W("TabsList",r),s=$(r);return(0,o.createElement)(G,(0,c.Z)({asChild:!0},s,{orientation:a.orientation,dir:a.dir,loop:i}),(0,o.createElement)(y.WV.div,(0,c.Z)({role:"tablist","aria-orientation":a.orientation},n,{ref:t})))}),q=(0,o.forwardRef)((e,t)=>{let{__scopeTabs:r,value:i,disabled:n=!1,...a}=e,s=W("TabsTrigger",r),d=$(r),u=Z(s.baseId,i),l=K(s.baseId,i),h=i===s.value;return(0,o.createElement)(j,(0,c.Z)({asChild:!0},d,{focusable:!n,active:h}),(0,o.createElement)(y.WV.button,(0,c.Z)({type:"button",role:"tab","aria-selected":h,"aria-controls":l,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u},a,{ref:t,onMouseDown:(0,f.M)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():s.onValueChange(i)}),onKeyDown:(0,f.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&s.onValueChange(i)}),onFocus:(0,f.M)(e.onFocus,()=>{let e="manual"!==s.activationMode;h||n||!e||s.onValueChange(i)})})))}),Y=(0,o.forwardRef)((e,t)=>{let{__scopeTabs:r,value:i,forceMount:n,children:a,...s}=e,d=W("TabsContent",r),u=Z(d.baseId,i),l=K(d.baseId,i),h=i===d.value,f=(0,o.useRef)(h);return(0,o.useEffect)(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,o.createElement)(P.z,{present:n||h},({present:r})=>(0,o.createElement)(y.WV.div,(0,c.Z)({"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:l,tabIndex:0},s,{ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0}}),r&&a))});function Z(e,t){return`${e}-trigger-${t}`}function K(e,t){return`${e}-content-${t}`}let X=o.forwardRef(({className:e,...t},r)=>n.jsx(V,{ref:r,className:(0,a.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));X.displayName=V.displayName;let J=o.forwardRef(({className:e,...t},r)=>n.jsx(q,{ref:r,className:(0,a.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-light-primary data-[state=active]:text-primary-dark ",e),...t}));J.displayName=q.displayName;let Q=o.forwardRef(({className:e,...t},r)=>n.jsx(Y,{ref:r,className:(0,a.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Q.displayName=Y.displayName;var ee=r(65819);let et="Avatar",[er,ei]=(0,p.b)(et),[en,eo]=er(et),ea=(0,o.forwardRef)((e,t)=>{let{__scopeAvatar:r,...i}=e,[n,a]=(0,o.useState)("idle");return(0,o.createElement)(en,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:a},(0,o.createElement)(y.WV.span,(0,c.Z)({},i,{ref:t})))}),es=(0,o.forwardRef)((e,t)=>{let{__scopeAvatar:r,src:i,onLoadingStatusChange:n=()=>{},...a}=e,s=eo("AvatarImage",r),d=function(e){let[t,r]=(0,o.useState)("idle");return(0,ee.b)(()=>{if(!e){r("error");return}let t=!0,i=new window.Image,n=e=>()=>{t&&r(e)};return r("loading"),i.onload=n("loaded"),i.onerror=n("error"),i.src=e,()=>{t=!1}},[e]),t}(i),u=(0,b.W)(e=>{n(e),s.onImageLoadingStatusChange(e)});return(0,ee.b)(()=>{"idle"!==d&&u(d)},[d,u]),"loaded"===d?(0,o.createElement)(y.WV.img,(0,c.Z)({},a,{ref:t,src:i})):null}),ed=(0,o.forwardRef)((e,t)=>{let{__scopeAvatar:r,delayMs:i,...n}=e,a=eo("AvatarFallback",r),[s,d]=(0,o.useState)(void 0===i);return(0,o.useEffect)(()=>{if(void 0!==i){let e=window.setTimeout(()=>d(!0),i);return()=>window.clearTimeout(e)}},[i]),s&&"loaded"!==a.imageLoadingStatus?(0,o.createElement)(y.WV.span,(0,c.Z)({},n,{ref:t})):null}),eu=o.forwardRef(({className:e,...t},r)=>n.jsx(ea,{ref:r,className:(0,a.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));eu.displayName=ea.displayName;let el=o.forwardRef(({className:e,...t},r)=>n.jsx(es,{ref:r,className:(0,a.cn)("aspect-square h-full w-full",e),...t}));el.displayName=es.displayName;let eh=o.forwardRef(({className:e,...t},r)=>n.jsx(ed,{ref:r,className:(0,a.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));eh.displayName=ed.displayName;var ec=r(82631);function ef({className:e,...t}){return n.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}let ep=({teamsData:e,isLoading:t})=>(0,n.jsxs)(s,{className:(0,a.cn)("bg-[#FCF4EE] border-4 border-[rgb(252,244,238)]"),children:[(0,n.jsxs)(d,{className:"flex flex-row justify-between items-center p-3",children:[n.jsx(u,{className:"text-xl text-primary-foreground",children:"LeaderBoard"}),n.jsx(h.CE,{className:"w-8 h-8 !m-0"})]}),(0,n.jsxs)(l,{className:"grid gap-6 bg-white rounded-lg pt-4 px-3 w-[300px]",children:[(0,n.jsxs)(X,{className:"grid w-full grid-cols-2 bg-white border-[3px] border-[#FCF4EE] h-fit rounded-xl",children:[n.jsx(J,{value:"team",className:" text-primary-dark",children:"Team"}),n.jsx(J,{value:"solo",className:" text-primary-dark",children:"Solo"})]}),n.jsx(Q,{value:"team",children:n.jsx(s,{className:"border-0 shadow-none gap-4 flex flex-col",children:t?n.jsx(eg,{}):e.map((e,t)=>(0,n.jsxs)(l,{className:"space-y-2 flex flex-row gap-3 items-center justify-between p-0 h-full",children:[(0,n.jsxs)("div",{className:"flex gap-5 items-center justify-center",children:[(0,n.jsxs)(eu,{className:"object-fit h-12 w-12 items-center justify-center relative overflow-visible",children:[n.jsx(el,{src:"/logo.webp",alt:"Profile Pic Preview",className:"h-12 w-12 rounded-full object-cover"}),n.jsx(eh,{children:n.jsx(h.tB,{})}),n.jsx("div",{className:"absolute bottom-0 -right-3 rounded-full flex items-center justify-center p-1 w-6 h-6 border-2 border-white bg-light-primary aspect-square text-xs",children:t+1})]}),n.jsx("span",{className:"font-medium text-primary-dark whitespace-nowrap  ",children:e.id.length>=11?n.jsx(ec.pn,{delayDuration:300,children:(0,n.jsxs)(ec.u,{children:[n.jsx(ec.aJ,{asChild:!0,children:(0,n.jsxs)("span",{className:"cursor-pointer",children:[e.id.slice(0,10),"..."]})}),n.jsx(ec._v,{children:(0,n.jsxs)("p",{children:[" ",e.id]})})]})}):e.id})]}),n.jsx("span",{className:"!m-0 font-semibold text-light-primary",children:e.points.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2,notation:"compact"})})]},e.id))})}),n.jsx(Q,{value:"solo",children:n.jsx(s,{className:"border-0 shadow-none gap-4 flex flex-col",children:t?n.jsx(eg,{}):[1,2,3,4,5].map((e,t)=>(0,n.jsxs)(l,{className:"space-y-2 flex flex-row gap-3 items-center justify-between p-0",children:[(0,n.jsxs)("div",{className:"flex gap-5 items-center justify-center",children:[(0,n.jsxs)(eu,{className:"object-fit h-12 w-12 items-center justify-center relative overflow-visible",children:[n.jsx(el,{src:"/logo.webp",alt:"Profile Pic Preview",className:"h-12 w-12 rounded-full object-cover"}),n.jsx(eh,{children:n.jsx(h.tB,{})}),n.jsx("div",{className:"absolute bottom-0 -right-3 rounded-full flex items-center justify-center p-1 w-6 h-6 border-2 border-white bg-light-primary aspect-square text-xs",children:t+1})]}),n.jsx("span",{className:"font-medium text-primary-dark",children:"John"})]}),n.jsx("span",{className:"!m-0 font-semibold text-light-primary",children:"19,100"})]},t))})})]})]}),eg=()=>[,,,,,].fill(0).map(e=>n.jsx("div",{className:"space-y-2 flex flex-row gap-3 items-center justify-between p-0 h-12",children:n.jsx(ef,{className:"w-full h-12 bg-[#f8e5d6]"})},e));var em=r(91664),ev=r(24118);let ey=({percentage:e,size:t=43,strokeWidth:r=4,text:i=100})=>{let o=(t-r)/2,a=2*Math.PI*o;return(0,n.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,n.jsxs)("svg",{width:t,height:t,className:"transform rotate-[-90deg]",children:[n.jsx("defs",{children:(0,n.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[n.jsx("stop",{offset:"0%",style:{stopColor:"#EA5455",stopOpacity:1}}),n.jsx("stop",{offset:"100%",style:{stopColor:" #FEB692",stopOpacity:1}})]})}),n.jsx("circle",{className:"text-gray-200",stroke:"currentColor",strokeWidth:r,fill:"none",cx:t/2,cy:t/2,r:o}),n.jsx("circle",{className:"text-orange-500",stroke:"url(#gradient)",strokeWidth:r,strokeLinecap:"round",fill:"none",cx:t/2,cy:t/2,r:o,strokeDasharray:a,strokeDashoffset:a-e/100*a,style:{transition:"stroke-dashoffset 0.5s ease"}})]}),n.jsx("span",{className:"absolute text-sm font-bold text-light-primary",children:i})]})},eb=({quests:e,isLoading:t})=>(console.log("quests",e),(0,n.jsxs)(ev.Vq,{children:[n.jsx(ev.hg,{asChild:!0,children:(0,n.jsxs)(em.z,{type:"button",variant:"primary",className:"text-white gap-2 px-6 py-4",children:[n.jsx(h.YJ,{}),"Quests"]})}),(0,n.jsxs)(ev.cZ,{className:"max-w-screen-lg",children:[n.jsx(ev.fK,{children:n.jsx(ev.$N,{className:"font-bold text-5xl",children:"Quests"})}),n.jsx(ev.Be,{className:"font-bold",children:"> Complete quests to increase personal & team points"}),t?n.jsx("div",{children:"Loading..."}):n.jsx("div",{className:"grid grid-cols-3 gap-5",children:e.map((e,t)=>(0,n.jsxs)("div",{className:"shadow-[0px_-4px_0px_0px_#ff9b61_inset] rounded-md border-x-2 border-t-2 border-[#FCF4EE] flex justify-between gap-6 p-[0.625rem]",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[n.jsx(ey,{percentage:70,text:100}),(0,n.jsxs)("div",{className:"flex flex-col items-start justify-center whitespace-nowrap",children:[n.jsx("span",{className:"text-xs",children:e.displayName.length>=16?n.jsx(ec.pn,{delayDuration:300,children:(0,n.jsxs)(ec.u,{children:[n.jsx(ec.aJ,{asChild:!0,children:(0,n.jsxs)("span",{className:"cursor-pointer",children:[e.displayName.slice(0,12),"..."]})}),n.jsx(ec._v,{children:(0,n.jsxs)("p",{children:[" ",e.displayName]})})]})}):e.displayName}),(0,n.jsxs)("p",{className:"text-[0.625rem]",children:["Time left: ",n.jsx("span",{className:"text-light-primary",children:"17m 23s"})]})]})]}),n.jsx(em.z,{variant:"primary",className:"text-white gap-2 px-6 py-4",children:"Claim"})]},e.name))}),n.jsx(ev.cN,{children:n.jsx(ev.GG,{asChild:!0,children:n.jsx(em.z,{variant:"primary",children:"Close"})})})]})]})),ex=({teams:e,isLoading:t})=>(0,n.jsxs)(ev.Vq,{children:[n.jsx(ev.hg,{asChild:!0,children:(0,n.jsxs)(em.z,{type:"button",variant:"primary",className:"text-white gap-2 px-6 py-4",children:[n.jsx(h.HW,{}),"Teams"]})}),(0,n.jsxs)(ev.cZ,{className:"max-w-screen-lg",children:[n.jsx(ev.fK,{children:n.jsx(ev.$N,{className:"font-bold text-5xl",children:"Teams"})}),n.jsx(ev.Be,{className:"font-bold",children:(0,n.jsxs)("ul",{children:[n.jsx("li",{children:" > Join teams to combine your point totals on the Team Leaderboards"}),n.jsx("li",{children:"> Make your own team or join existing ones, it’s your choice!"})]})}),n.jsx("div",{className:"grid grid-cols-3 gap-5",children:e.map((e,t)=>(0,n.jsxs)("div",{className:"shadow-[0px_-4px_0px_0px_#ff9b61_inset] rounded-md border-x-2 border-t-2 border-[#FCF4EE] flex items-center justify-around gap-6 p-[0.625rem] text-sm",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start justify-center whitespace-nowrap",children:[n.jsx("div",{className:"text-light-primary font-bold",children:e.id.length>=13?n.jsx(ec.pn,{delayDuration:300,children:(0,n.jsxs)(ec.u,{children:[n.jsx(ec.aJ,{asChild:!0,children:(0,n.jsxs)("span",{className:"cursor-pointer",children:[e.id.slice(0,10),"..."]})}),n.jsx(ec._v,{children:(0,n.jsxs)("p",{children:[" ",e.id]})})]})}):e.id}),(0,n.jsxs)("p",{className:"text-[0.625rem]",children:["points:",n.jsx("span",{className:"ml-1",children:e.points.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center whitespace-nowrap",children:[n.jsx("span",{className:"text-light-primary font-bold",children:"Members"}),n.jsx("span",{className:"text-[0.625rem]",children:e.members.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})})]})]}),n.jsx(em.z,{variant:1===t?"destructive":"primary",className:(0,a.cn)("text-white gap-2 px-6 py-4 "),children:1===t?"Leave":"Join"})]},t))}),n.jsx(ev.cN,{children:n.jsx(ev.GG,{asChild:!0,children:n.jsx(em.z,{variant:"primary",children:"Close"})})})]})]}),ew=({open:e})=>{let[t,r]=(0,o.useState)(!1);return((0,o.useRef)(!1),(0,o.useEffect)(()=>{if(!e)return;r(!0);let t=setTimeout(()=>{r(!1)},1500);return()=>clearTimeout(t)},[e]),t)?n.jsx("div",{className:(0,a.cn)("fixed inset-0 z-50 bg-white bg-opacity-40 backdrop-blur-[1px] flex items-center justify-center"),children:n.jsx("div",{children:(0,n.jsxs)("svg",{width:"450",height:"248",viewBox:"0 0 450 248",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:" animate-blink",children:[n.jsx("rect",{x:"5",y:"5",width:"440",height:"238",rx:"27",stroke:"url(#paint0_linear_44_1337)",strokeWidth:"10"}),n.jsx("path",{d:"M133.2 99.4C130.933 95.6667 127.8 92.8 123.8 90.8C119.933 88.8 115.333 87.8 110 87.8C100.133 87.8 92.3333 91 86.6 97.4C81 103.8 78.2 112.4 78.2 123.2C78.2 135.333 81.2 144.6 87.2 151C93.3333 157.267 102.2 160.4 113.8 160.4C127.533 160.4 137.333 154.2 143.2 141.8H103.8V113.6H177V151.6C173.933 159.067 169.4 166.067 163.4 172.6C157.533 179.133 150.067 184.533 141 188.8C131.933 192.933 121.6 195 110 195C95.8667 195 83.3333 192 72.4 186C61.6 179.867 53.2 171.4 47.2 160.6C41.3333 149.667 38.4 137.2 38.4 123.2C38.4 109.333 41.3333 97 47.2 86.2C53.2 75.2667 61.6 66.8 72.4 60.8C83.2 54.6667 95.6667 51.6 109.8 51.6C127.533 51.6 142.2 55.8667 153.8 64.4C165.4 72.9333 172.6 84.6 175.4 99.4H133.2ZM258.167 195.4C244.967 195.4 232.834 192.333 221.767 186.2C210.701 179.933 201.901 171.333 195.367 160.4C188.967 149.333 185.767 136.867 185.767 123C185.767 109.133 188.967 96.7333 195.367 85.8C201.901 74.7333 210.701 66.1333 221.767 60C232.834 53.8667 244.967 50.8 258.167 50.8C271.501 50.8 283.634 53.8667 294.567 60C305.634 66.1333 314.367 74.7333 320.767 85.8C327.167 96.7333 330.367 109.133 330.367 123C330.367 136.867 327.167 149.333 320.767 160.4C314.367 171.333 305.634 179.933 294.567 186.2C283.501 192.333 271.367 195.4 258.167 195.4ZM258.167 159C268.167 159 276.034 155.733 281.767 149.2C287.634 142.667 290.567 133.933 290.567 123C290.567 111.8 287.634 103 281.767 96.6C276.034 90.0667 268.167 86.8 258.167 86.8C248.034 86.8 240.101 90.0667 234.367 96.6C228.634 103 225.767 111.8 225.767 123C225.767 134.067 228.634 142.867 234.367 149.4C240.101 155.8 248.034 159 258.167 159ZM396.389 45.8L391.789 141.2H358.389L353.789 45.8H396.389ZM375.189 195.6C368.256 195.6 362.656 193.733 358.389 190C354.256 186.133 352.189 181.267 352.189 175.4C352.189 169.533 354.256 164.667 358.389 160.8C362.656 156.933 368.256 155 375.189 155C381.989 155 387.456 156.933 391.589 160.8C395.856 164.667 397.989 169.533 397.989 175.4C397.989 181.133 395.856 185.933 391.589 189.8C387.456 193.667 381.989 195.6 375.189 195.6Z",fill:"white"}),n.jsx("path",{d:"M133.2 99.4C130.933 95.6667 127.8 92.8 123.8 90.8C119.933 88.8 115.333 87.8 110 87.8C100.133 87.8 92.3333 91 86.6 97.4C81 103.8 78.2 112.4 78.2 123.2C78.2 135.333 81.2 144.6 87.2 151C93.3333 157.267 102.2 160.4 113.8 160.4C127.533 160.4 137.333 154.2 143.2 141.8H103.8V113.6H177V151.6C173.933 159.067 169.4 166.067 163.4 172.6C157.533 179.133 150.067 184.533 141 188.8C131.933 192.933 121.6 195 110 195C95.8667 195 83.3333 192 72.4 186C61.6 179.867 53.2 171.4 47.2 160.6C41.3333 149.667 38.4 137.2 38.4 123.2C38.4 109.333 41.3333 97 47.2 86.2C53.2 75.2667 61.6 66.8 72.4 60.8C83.2 54.6667 95.6667 51.6 109.8 51.6C127.533 51.6 142.2 55.8667 153.8 64.4C165.4 72.9333 172.6 84.6 175.4 99.4H133.2ZM258.167 195.4C244.967 195.4 232.834 192.333 221.767 186.2C210.701 179.933 201.901 171.333 195.367 160.4C188.967 149.333 185.767 136.867 185.767 123C185.767 109.133 188.967 96.7333 195.367 85.8C201.901 74.7333 210.701 66.1333 221.767 60C232.834 53.8667 244.967 50.8 258.167 50.8C271.501 50.8 283.634 53.8667 294.567 60C305.634 66.1333 314.367 74.7333 320.767 85.8C327.167 96.7333 330.367 109.133 330.367 123C330.367 136.867 327.167 149.333 320.767 160.4C314.367 171.333 305.634 179.933 294.567 186.2C283.501 192.333 271.367 195.4 258.167 195.4ZM258.167 159C268.167 159 276.034 155.733 281.767 149.2C287.634 142.667 290.567 133.933 290.567 123C290.567 111.8 287.634 103 281.767 96.6C276.034 90.0667 268.167 86.8 258.167 86.8C248.034 86.8 240.101 90.0667 234.367 96.6C228.634 103 225.767 111.8 225.767 123C225.767 134.067 228.634 142.867 234.367 149.4C240.101 155.8 248.034 159 258.167 159ZM396.389 45.8L391.789 141.2H358.389L353.789 45.8H396.389ZM375.189 195.6C368.256 195.6 362.656 193.733 358.389 190C354.256 186.133 352.189 181.267 352.189 175.4C352.189 169.533 354.256 164.667 358.389 160.8C362.656 156.933 368.256 155 375.189 155C381.989 155 387.456 156.933 391.589 160.8C395.856 164.667 397.989 169.533 397.989 175.4C397.989 181.133 395.856 185.933 391.589 189.8C387.456 193.667 381.989 195.6 375.189 195.6Z",fill:"url(#paint1_linear_44_1337)"}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("linearGradient",{id:"paint0_linear_44_1337",x1:"8.84281",y1:"-2.49004e-05",x2:"453.6",y2:"241.366",gradientUnits:"userSpaceOnUse",children:[n.jsx("stop",{stopColor:"#FFC88D"}),n.jsx("stop",{offset:"1",stopColor:"#FE866E"})]}),(0,n.jsxs)("linearGradient",{id:"paint1_linear_44_1337",x1:"39.5852",y1:"24",x2:"410.019",y2:"237.826",gradientUnits:"userSpaceOnUse",children:[n.jsx("stop",{stopColor:"#FFC88D"}),n.jsx("stop",{offset:"1",stopColor:"#FE866E"})]})]})]})})}):null},eE=[{title:"Teams",description:"Join teams to combine your point totals on the Team Leaderboards. Make your own team or join existing ones, it’s your choice!"},{title:"Quests",description:"Complete quests to increase personal and team points."},{title:"Leaderboards",description:"Points count individually and for the team you joined. Rank high on the leaderboards for bragging rights and more!"}],e_=()=>{let[e,t]=(0,o.useState)(!1),[r,i]=(0,o.useState)(!1);(0,o.useEffect)(()=>{t(!0)},[]);let a=(0,o.useCallback)(e=>{t(e),e||i(!0)},[]);return(0,n.jsxs)(n.Fragment,{children:[!e&&r&&n.jsx(ew,{open:r}),(0,n.jsxs)(ev.Vq,{open:e,onOpenChange:e=>a(e),children:[n.jsx(ev.hg,{asChild:!0,children:n.jsx(em.z,{type:"button",variant:"primary",className:"text-white gap-2 px-6 py-4",children:"How to Play"})}),(0,n.jsxs)(ev.cZ,{className:"max-w-screen-sm",children:[n.jsx(ev.fK,{children:n.jsx(ev.$N,{className:"font-bold text-5xl",children:"How to Play"})}),eE.map((e,t)=>(0,n.jsxs)("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-lg font-bold text-primary-dark",children:e.title}),n.jsx("p",{className:"text-[#C38B88]",children:e.description})]},t)),n.jsx(ev.cN,{children:n.jsx("div",{className:"items-center justify-center w-full flex",children:n.jsx(ev.GG,{asChild:!0,children:n.jsx(em.z,{variant:"primary",children:"Start Playing!"})})})})]})]})]})};var eC=r(825),ek=r(80699),eA=r(10441),eS=r(9625),eT=r(83078),eN=r(35664),eR=r(95011);let eL="Popover",[eD,eG]=(0,p.b)(eL,[eS.D7]),eF=(0,eS.D7)(),[ej,ez]=eD(eL),eM="PopoverPortal",[eP,eI]=eD(eM,{forceMount:void 0}),eO="PopoverContent",eU=(0,o.forwardRef)((e,t)=>{let r=eI(eO,e.__scopePopover),{forceMount:i=r.forceMount,...n}=e,a=ez(eO,e.__scopePopover);return(0,o.createElement)(P.z,{present:i||a.open},a.modal?(0,o.createElement)(e$,(0,c.Z)({},n,{ref:t})):(0,o.createElement)(eB,(0,c.Z)({},n,{ref:t})))}),e$=(0,o.forwardRef)((e,t)=>{let r=ez(eO,e.__scopePopover),i=(0,o.useRef)(null),n=(0,g.e)(t,i),a=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{let e=i.current;if(e)return(0,eN.Ry)(e)},[]),(0,o.createElement)(eR.Z,{as:m.g7,allowPinchZoom:!0},(0,o.createElement)(eW,(0,c.Z)({},e,{ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,f.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),a.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,f.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,i=2===t.button||r;a.current=i},{checkForDefaultPrevented:!1}),onFocusOutside:(0,f.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})))}),eB=(0,o.forwardRef)((e,t)=>{let r=ez(eO,e.__scopePopover),i=(0,o.useRef)(!1),n=(0,o.useRef)(!1);return(0,o.createElement)(eW,(0,c.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,a;null===(o=e.onCloseAutoFocus)||void 0===o||o.call(e,t),t.defaultPrevented||(i.current||null===(a=r.triggerRef.current)||void 0===a||a.focus(),t.preventDefault()),i.current=!1,n.current=!1},onInteractOutside:t=>{var o,a;null===(o=e.onInteractOutside)||void 0===o||o.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"!==t.detail.originalEvent.type||(n.current=!0));let s=t.target;(null===(a=r.triggerRef.current)||void 0===a?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}}))}),eW=(0,o.forwardRef)((e,t)=>{let{__scopePopover:r,trapFocus:i,onOpenAutoFocus:n,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:l,onInteractOutside:h,...f}=e,p=ez(eO,r),g=eF(r);return(0,ek.EW)(),(0,o.createElement)(eA.M,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:n,onUnmountAutoFocus:a},(0,o.createElement)(eC.XB,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:h,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:l,onDismiss:()=>p.onOpenChange(!1)},(0,o.createElement)(eS.VY,(0,c.Z)({"data-state":function(e){return e?"open":"closed"}(p.open),role:"dialog",id:p.contentId},g,f,{ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),eH=e=>{let{__scopePopover:t,forceMount:r,children:i,container:n}=e,a=ez(eM,t);return(0,o.createElement)(eP,{scope:t,forceMount:r},(0,o.createElement)(P.z,{present:r||a.open},(0,o.createElement)(eT.h,{asChild:!0,container:n},i)))},eV=e=>{let{__scopePopover:t,children:r,open:i,defaultOpen:n,onOpenChange:a,modal:s=!1}=e,d=eF(t),u=(0,o.useRef)(null),[l,h]=(0,o.useState)(!1),[c=!1,f]=(0,x.T)({prop:i,defaultProp:n,onChange:a});return(0,o.createElement)(eS.fC,d,(0,o.createElement)(ej,{scope:t,contentId:(0,v.M)(),triggerRef:u,open:c,onOpenChange:f,onOpenToggle:(0,o.useCallback)(()=>f(e=>!e),[f]),hasCustomAnchor:l,onCustomAnchorAdd:(0,o.useCallback)(()=>h(!0),[]),onCustomAnchorRemove:(0,o.useCallback)(()=>h(!1),[]),modal:s},r))},eq=o.forwardRef(({className:e,align:t="center",sideOffset:r=4,...i},o)=>n.jsx(eH,{children:n.jsx(eU,{ref:o,align:t,sideOffset:r,className:(0,a.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i})}));eq.displayName=eU.displayName;var eY=r(46226);function eZ({open:e,onClose:t,node:r,position:i}){return r?n.jsx(eV,{open:e,onOpenChange:t,children:n.jsx(eq,{className:"w-fit min-w-[240px] z-50 gap-3 py-8 shadow-none border-4 border-[#FCF4EE]",style:{position:"fixed",left:i.x,top:i.y},children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[n.jsx(eY.default,{src:r.image,width:84,height:84,alt:r.label}),n.jsx("h4",{className:"font-bold text-primary-dark",children:r.label}),(0,n.jsxs)("span",{className:"flex items-center justify-center space-x-2 text-light font-normal",children:[r.members.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})," ","members"]}),(0,n.jsxs)("span",{className:"flex items-center justify-center space-x-2 text-light font-semibold",children:[r.points.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})," ","points"]})]}),n.jsx(em.z,{type:"button",variant:"primary",className:"px-8 mt-4",onClick:t,children:"Join"})]})})}):null}var eK=r(77276),eX=r(24490);let eJ=()=>(0,eK.a)({queryKey:["teams"],queryFn:async()=>eX.Z.request({method:"get",maxBodyLength:1/0,url:"https://7h6ggyk6yf.execute-api.us-east-1.amazonaws.com/dev//groups",headers:{user_id:"AIDAYEOGDEAXQDTAWY4DO",Accept:"application/json","x-api-key":"z3RLMDSix54as3nOtaP1cawy9fhykGsc581JPLSs"}}).then(e=>(console.log("useTeams: ",e.data),e.data)).catch(e=>{console.log(e)})});var eQ=r(82361),e0=r(82363),e1=r.n(e0),e2=r(97500),e3=r.n(e2),e6=r(36126),e5=r.n(e6);let e4=function(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++)if(arguments[t])for(let r in arguments[t])e[r]=arguments[t][r];return e};function e8(e,t,r,i){let n=e._nodes.get(t),o=null;return n?o="mixed"===i?n.out&&n.out[r]||n.undirected&&n.undirected[r]:"directed"===i?n.out&&n.out[r]:n.undirected&&n.undirected[r]:o}function e7(e){return"object"==typeof e&&null!==e}function e9(e){let t;for(t in e)return!1;return!0}function te(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:r})}function tt(e,t,r){let i={enumerable:!0,configurable:!0};"function"==typeof r?i.get=r:(i.value=r,i.writable=!1),Object.defineProperty(e,t,i)}function tr(e){return!!(e7(e)&&(!e.attributes||Array.isArray(e.attributes)))}"function"==typeof Object.assign&&(e4=Object.assign);class ti extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class tn extends ti{constructor(e){super(e),this.name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.constructor)}}class to extends ti{constructor(e){super(e),this.name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,to.prototype.constructor)}}class ta extends ti{constructor(e){super(e),this.name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ta.prototype.constructor)}}function ts(e,t){this.key=e,this.attributes=t,this.clear()}function td(e,t){this.key=e,this.attributes=t,this.clear()}function tu(e,t){this.key=e,this.attributes=t,this.clear()}function tl(e,t,r,i,n){this.key=t,this.attributes=n,this.undirected=e,this.source=r,this.target=i}function th(e,t,r,i,n,o,a){let s,d,u,l;if(i=""+i,0===r){if(!(s=e._nodes.get(i)))throw new to(`Graph.${t}: could not find the "${i}" node in the graph.`);u=n,l=o}else if(3===r){if(n=""+n,!(d=e._edges.get(n)))throw new to(`Graph.${t}: could not find the "${n}" edge in the graph.`);let r=d.source.key,h=d.target.key;if(i===r)s=d.target;else if(i===h)s=d.source;else throw new to(`Graph.${t}: the "${i}" node is not attached to the "${n}" edge (${r}, ${h}).`);u=o,l=a}else{if(!(d=e._edges.get(i)))throw new to(`Graph.${t}: could not find the "${i}" edge in the graph.`);s=1===r?d.source:d.target,u=n,l=o}return[s,u,l]}ts.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},td.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},tu.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},tl.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");let r=this.source.key,i=this.target.key;this.source[e][i]=this,this.undirected&&r===i||(this.target[t][r]=this)},tl.prototype.attachMulti=function(){let e="out",t="in",r=this.source.key,i=this.target.key;this.undirected&&(e=t="undirected");let n=this.source[e],o=n[i];if(void 0===o){n[i]=this,this.undirected&&r===i||(this.target[t][r]=this);return}o.previous=this,this.next=o,n[i]=this,this.target[t][r]=this},tl.prototype.detach=function(){let e=this.source.key,t=this.target.key,r="out",i="in";this.undirected&&(r=i="undirected"),delete this.source[r][t],delete this.target[i][e]},tl.prototype.detachMulti=function(){let e=this.source.key,t=this.target.key,r="out",i="in";this.undirected&&(r=i="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[r][t],delete this.target[i][e]):(this.next.previous=void 0,this.source[r][t]=this.next,this.target[i][e]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};let tc=[{name:e=>`get${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let[o,a]=th(this,t,r,e,i,n);return o.attributes[a]}}},{name:e=>`get${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e,i){let[n]=th(this,t,r,e,i);return n.attributes}}},{name:e=>`has${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let[o,a]=th(this,t,r,e,i,n);return o.attributes.hasOwnProperty(a)}}},{name:e=>`set${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n,o){let[a,s,d]=th(this,t,r,e,i,n,o);return a.attributes[s]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:s}),this}}},{name:e=>`update${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n,o){let[a,s,d]=th(this,t,r,e,i,n,o);if("function"!=typeof d)throw new tn(`Graph.${t}: updater should be a function.`);let u=a.attributes,l=d(u[s]);return u[s]=l,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:s}),this}}},{name:e=>`remove${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let[o,a]=th(this,t,r,e,i,n);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}},{name:e=>`replace${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let[o,a]=th(this,t,r,e,i,n);if(!e7(a))throw new tn(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let[o,a]=th(this,t,r,e,i,n);if(!e7(a))throw new tn(`Graph.${t}: provided attributes are not a plain object.`);return e4(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}},{name:e=>`update${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let[o,a]=th(this,t,r,e,i,n);if("function"!=typeof a)throw new tn(`Graph.${t}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}}],tf=[{name:e=>`get${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i){let n;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let o=""+e,a=""+i;if(i=arguments[2],!(n=e8(this,o,a,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(n=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return n.attributes[i]}}},{name:e=>`get${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e){let i;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let n=""+e,o=""+arguments[1];if(!(i=e8(this,n,o,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${n}" - "${o}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(i=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return i.attributes}}},{name:e=>`has${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i){let n;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let o=""+e,a=""+i;if(i=arguments[2],!(n=e8(this,o,a,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(n=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return n.attributes.hasOwnProperty(i)}}},{name:e=>`set${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let o;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let a=""+e,s=""+i;if(i=arguments[2],n=arguments[3],!(o=e8(this,a,s,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(o=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return o.attributes[i]=n,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}},{name:e=>`update${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i,n){let o;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let a=""+e,s=""+i;if(i=arguments[2],n=arguments[3],!(o=e8(this,a,s,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(o=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if("function"!=typeof n)throw new tn(`Graph.${t}: updater should be a function.`);return o.attributes[i]=n(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}},{name:e=>`remove${e}Attribute`,attacher:function(e,t,r){e.prototype[t]=function(e,i){let n;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let o=""+e,a=""+i;if(i=arguments[2],!(n=e8(this,o,a,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(n=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}return delete n.attributes[i],this.emit("edgeAttributesUpdated",{key:n.key,type:"remove",attributes:n.attributes,name:i}),this}}},{name:e=>`replace${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e,i){let n;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let o=""+e,a=""+i;if(i=arguments[2],!(n=e8(this,o,a,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(n=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if(!e7(i))throw new tn(`Graph.${t}: provided attributes are not a plain object.`);return n.attributes=i,this.emit("edgeAttributesUpdated",{key:n.key,type:"replace",attributes:n.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e,i){let n;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let o=""+e,a=""+i;if(i=arguments[2],!(n=e8(this,o,a,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(n=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if(!e7(i))throw new tn(`Graph.${t}: provided attributes are not a plain object.`);return e4(n.attributes,i),this.emit("edgeAttributesUpdated",{key:n.key,type:"merge",attributes:n.attributes,data:i}),this}}},{name:e=>`update${e}Attributes`,attacher:function(e,t,r){e.prototype[t]=function(e,i){let n;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new ta(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ta(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let o=""+e,a=""+i;if(i=arguments[2],!(n=e8(this,o,a,r)))throw new to(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==r)throw new ta(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,!(n=this._edges.get(e)))throw new to(`Graph.${t}: could not find the "${e}" edge in the graph.`)}if("function"!=typeof i)throw new tn(`Graph.${t}: provided updater is not a function.`);return n.attributes=i(n.attributes),this.emit("edgeAttributesUpdated",{key:n.key,type:"update",attributes:n.attributes}),this}}}],tp=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function tg(e,t,r,i){let n=!1;for(let o in t){if(o===i)continue;let a=t[o];if(n=r(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),e&&n)return a.key}}function tm(e,t,r,i){let n,o,a;let s=!1;for(let d in t)if(d!==i){n=t[d];do{if(o=n.source,a=n.target,s=r(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected),e&&s)return n.key;n=n.next}while(void 0!==n)}}function tv(e,t){let r;let i=Object.keys(e),n=i.length,o=0;return new(e1())(function(){do if(r)r=r.next;else{if(o>=n)return{done:!0};let a=i[o++];if(a===t){r=void 0;continue}r=e[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function ty(e,t,r,i){let n=t[r];if(!n)return;let o=n.source,a=n.target;if(i(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected)&&e)return n.key}function tb(e,t,r,i){let n=t[r];if(!n)return;let o=!1;do{if(o=i(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),e&&o)return n.key;n=n.next}while(void 0!==n)}function tx(e,t){let r=e[t];return void 0!==r.next?new(e1())(function(){if(!r)return{done:!0};let e={edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected};return r=r.next,{done:!1,value:e}}):e1().of({edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected})}function tw(e,t,r,i){let n,o;if(0===t.size)return;let a="mixed"!==r&&r!==t.type,s="undirected"===r,d=!1,u=t._edges.values();for(;!0!==(n=u.next()).done;){if(o=n.value,a&&o.undirected!==s)continue;let{key:t,attributes:r,source:u,target:l}=o;if(d=i(t,r,u.key,l.key,u.attributes,l.attributes,o.undirected),e&&d)return t}}function tE(e,t,r,i,n,o){let a;let s=t?tm:tg;if("undirected"!==r&&("out"!==i&&(a=s(e,n.in,o),e&&a)||"in"!==i&&(a=s(e,n.out,o,i?void 0:n.key),e&&a))||"directed"!==r&&(a=s(e,n.undirected,o),e&&a))return a}function t_(e,t,r,i,n,o,a){let s;let d=r?tb:ty;if("undirected"!==t&&(void 0!==n.in&&"out"!==i&&(s=d(e,n.in,o,a),e&&s)||void 0!==n.out&&"in"!==i&&(i||n.key!==o)&&(s=d(e,n.out,o,a),e&&s))||"directed"!==t&&void 0!==n.undirected&&(s=d(e,n.undirected,o,a),e&&s))return s}let tC=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function tk(){this.A=null,this.B=null}function tA(e,t,r,i,n){for(let o in i){let a=i[o],s=a.source,d=a.target,u=s===r?d:s;if(t&&t.has(u.key))continue;let l=n(u.key,u.attributes);if(e&&l)return u.key}}function tS(e,t,r,i,n){let o;if("mixed"!==t){if("undirected"===t)return tA(e,null,i,i.undirected,n);if("string"==typeof r)return tA(e,null,i,i[r],n)}let a=new tk;if("undirected"!==t){if("out"!==r){if(o=tA(e,null,i,i.in,n),e&&o)return o;a.wrap(i.in)}if("in"!==r){if(o=tA(e,a,i,i.out,n),e&&o)return o;a.wrap(i.out)}}if("directed"!==t&&(o=tA(e,a,i,i.undirected,n),e&&o))return o}function tT(e,t,r){let i=Object.keys(r),n=i.length,o=0;return new(e1())(function(){let a=null;do{if(o>=n)return e&&e.wrap(r),{done:!0};let s=r[i[o++]],d=s.source,u=s.target;if(a=d===t?u:d,e&&e.has(a.key)){a=null;continue}}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function tN(e,t,r,i,n){let o,a,s,d,u,l,h;let c=i._nodes.values(),f=i.type;for(;!0!==(o=c.next()).done;){let i=!1;if(a=o.value,"undirected"!==f)for(s in d=a.out){u=d[s];do{if(l=u.target,i=!0,h=n(a.key,l.key,a.attributes,l.attributes,u.key,u.attributes,u.undirected),e&&h)return u;u=u.next}while(u)}if("directed"!==f){for(s in d=a.undirected)if(!t||!(a.key>s)){u=d[s];do{if((l=u.target).key!==s&&(l=u.source),i=!0,h=n(a.key,l.key,a.attributes,l.attributes,u.key,u.attributes,u.undirected),e&&h)return u;u=u.next}while(u)}}if(r&&!i&&(h=n(a.key,null,a.attributes,null,null,null,null),e&&h))return null}}tk.prototype.wrap=function(e){null===this.A?this.A=e:null===this.B&&(this.B=e)},tk.prototype.has=function(e){return null!==this.A&&e in this.A||null!==this.B&&e in this.B};let tR=function(){let e=255&Math.floor(256*Math.random());return()=>e++}(),tL=new Set(["directed","undirected","mixed"]),tD=new Set(["domain","_events","_eventsCount","_maxListeners"]),tG={allowSelfLoops:!0,multi:!1,type:"mixed"};function tF(e,t,r){let i=new e.NodeDataClass(t,r);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:r}),i}function tj(e,t,r,i,n,o,a,s){if(!i&&"undirected"===e.type)throw new ta(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&"directed"===e.type)throw new ta(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!e7(s))throw new tn(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!e.allowSelfLoops&&o===a)throw new ta(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let d=e._nodes.get(o),u=e._nodes.get(a);if(!d)throw new to(`Graph.${t}: source node "${o}" not found.`);if(!u)throw new to(`Graph.${t}: target node "${a}" not found.`);let l={key:null,undirected:i,source:o,target:a,attributes:s};if(r)n=e._edgeKeyGenerator();else if(n=""+n,e._edges.has(n))throw new ta(`Graph.${t}: the "${n}" edge already exists in the graph.`);if(!e.multi&&(i?void 0!==d.undirected[a]:void 0!==d.out[a]))throw new ta(`Graph.${t}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);let h=new tl(i,n,d,u,s);e._edges.set(n,h);let c=o===a;return i?(d.undirectedDegree++,u.undirectedDegree++,c&&(d.undirectedLoops++,e._undirectedSelfLoopCount++)):(d.outDegree++,u.inDegree++,c&&(d.directedLoops++,e._directedSelfLoopCount++)),e.multi?h.attachMulti():h.attach(),i?e._undirectedSize++:e._directedSize++,l.key=n,e.emit("edgeAdded",l),n}function tz(e,t,r,i,n,o,a,s,d){let u,l,h;if(!i&&"undirected"===e.type)throw new ta(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&"directed"===e.type)throw new ta(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(d){if("function"!=typeof s)throw new tn(`Graph.${t}: invalid updater function. Expecting a function but got "${s}"`)}else if(!e7(s))throw new tn(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`)}if(o=""+o,a=""+a,d&&(u=s,s=void 0),!e.allowSelfLoops&&o===a)throw new ta(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=e._nodes.get(o),f=e._nodes.get(a);if(!r&&(l=e._edges.get(n))){if((l.source.key!==o||l.target.key!==a)&&(!i||l.source.key!==a||l.target.key!==o))throw new ta(`Graph.${t}: inconsistency detected when attempting to merge the "${n}" edge with "${o}" source & "${a}" target vs. ("${l.source.key}", "${l.target.key}").`);h=l}if(h||e.multi||!c||(h=i?c.undirected[a]:c.out[a]),h){let t=[h.key,!1,!1,!1];if(d?!u:!s)return t;if(d){let t=h.attributes;h.attributes=u(t),e.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else e4(h.attributes,s),e.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:s});return t}s=s||{},d&&u&&(s=u(s));let p={key:null,undirected:i,source:o,target:a,attributes:s};if(r)n=e._edgeKeyGenerator();else if(n=""+n,e._edges.has(n))throw new ta(`Graph.${t}: the "${n}" edge already exists in the graph.`);let g=!1,m=!1;c||(c=tF(e,o,{}),g=!0,o!==a||(f=c,m=!0)),f||(f=tF(e,a,{}),m=!0),l=new tl(i,n,c,f,s),e._edges.set(n,l);let v=o===a;return i?(c.undirectedDegree++,f.undirectedDegree++,v&&(c.undirectedLoops++,e._undirectedSelfLoopCount++)):(c.outDegree++,f.inDegree++,v&&(c.directedLoops++,e._directedSelfLoopCount++)),e.multi?l.attachMulti():l.attach(),i?e._undirectedSize++:e._directedSize++,p.key=n,e.emit("edgeAdded",p),[n,!0,g,m]}function tM(e,t){e._edges.delete(t.key);let{source:r,target:i,attributes:n}=t,o=t.undirected,a=r===i;o?(r.undirectedDegree--,i.undirectedDegree--,a&&(r.undirectedLoops--,e._undirectedSelfLoopCount--)):(r.outDegree--,i.inDegree--,a&&(r.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),o?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:n,source:r.key,target:i.key,undirected:o})}class tP extends eQ.EventEmitter{constructor(e){if(super(),"boolean"!=typeof(e=e4({},tG,e)).multi)throw new tn(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!tL.has(e.type))throw new tn(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if("boolean"!=typeof e.allowSelfLoops)throw new tn(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);te(this,"NodeDataClass","mixed"===e.type?ts:"directed"===e.type?td:tu);let t="geid_"+tR()+"_",r=0;te(this,"_attributes",{}),te(this,"_nodes",new Map),te(this,"_edges",new Map),te(this,"_directedSize",0),te(this,"_undirectedSize",0),te(this,"_directedSelfLoopCount",0),te(this,"_undirectedSelfLoopCount",0),te(this,"_edgeKeyGenerator",()=>{let e;do e=t+r++;while(this._edges.has(e));return e}),te(this,"_options",e),tD.forEach(e=>te(this,e,this[e])),tt(this,"order",()=>this._nodes.size),tt(this,"size",()=>this._edges.size),tt(this,"directedSize",()=>this._directedSize),tt(this,"undirectedSize",()=>this._undirectedSize),tt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),tt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),tt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),tt(this,"multi",this._options.multi),tt(this,"type",this._options.type),tt(this,"allowSelfLoops",this._options.allowSelfLoops),tt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if("undirected"===this.type)return!1;if(1==arguments.length){let t=""+e,r=this._edges.get(t);return!!r&&!r.undirected}if(2==arguments.length){e=""+e,t=""+t;let r=this._nodes.get(e);return!!r&&r.out.hasOwnProperty(t)}throw new tn(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if("directed"===this.type)return!1;if(1==arguments.length){let t=""+e,r=this._edges.get(t);return!!r&&r.undirected}if(2==arguments.length){e=""+e,t=""+t;let r=this._nodes.get(e);return!!r&&r.undirected.hasOwnProperty(t)}throw new tn(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(1==arguments.length){let t=""+e;return this._edges.has(t)}if(2==arguments.length){e=""+e,t=""+t;let r=this._nodes.get(e);return!!r&&(void 0!==r.out&&r.out.hasOwnProperty(t)||void 0!==r.undirected&&r.undirected.hasOwnProperty(t))}throw new tn(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if("undirected"===this.type)return;if(e=""+e,t=""+t,this.multi)throw new ta("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");let r=this._nodes.get(e);if(!r)throw new to(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new to(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);let i=r.out&&r.out[t]||void 0;if(i)return i.key}undirectedEdge(e,t){if("directed"===this.type)return;if(e=""+e,t=""+t,this.multi)throw new ta("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");let r=this._nodes.get(e);if(!r)throw new to(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new to(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);let i=r.undirected&&r.undirected[t]||void 0;if(i)return i.key}edge(e,t){if(this.multi)throw new ta("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new to(`Graph.edge: could not find the "${t}" target node in the graph.`);let i=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(i)return i.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&(t in r.in||t in r.out)}areOutNeighbors(e,t){e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return"directed"!==this.type&&t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&(t in r.in||t in r.out)||"directed"!==this.type&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in r.in||"directed"!==this.type&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;let r=this._nodes.get(e);if(!r)throw new to(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return"undirected"!==this.type&&t in r.out||"directed"!==this.type&&t in r.undirected}inDegree(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.inDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree}outDegree(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.outDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.outDegree}directedDegree(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return"directed"===this.type?0:t.undirectedDegree}inboundDegree(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return"directed"!==this.type&&(r+=t.undirectedDegree),"undirected"!==this.type&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return"directed"!==this.type&&(r+=t.undirectedDegree),"undirected"!==this.type&&(r+=t.outDegree),r}degree(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return"directed"!==this.type&&(r+=t.undirectedDegree),"undirected"!==this.type&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"undirected"===this.type?0:t.inDegree+t.outDegree-2*t.directedLoops}undirectedDegreeWithoutSelfLoops(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return"directed"===this.type?0:t.undirectedDegree-2*t.undirectedLoops}inboundDegreeWithoutSelfLoops(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return"directed"!==this.type&&(r+=t.undirectedDegree,i+=2*t.undirectedLoops),"undirected"!==this.type&&(r+=t.inDegree,i+=t.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return"directed"!==this.type&&(r+=t.undirectedDegree,i+=2*t.undirectedLoops),"undirected"!==this.type&&(r+=t.outDegree,i+=t.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;let t=this._nodes.get(e);if(!t)throw new to(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return"directed"!==this.type&&(r+=t.undirectedDegree,i+=2*t.undirectedLoops),"undirected"!==this.type&&(r+=t.inDegree+t.outDegree,i+=2*t.directedLoops),r-i}source(e){e=""+e;let t=this._edges.get(e);if(!t)throw new to(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;let t=this._edges.get(e);if(!t)throw new to(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;let t=this._edges.get(e);if(!t)throw new to(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;let r=this._edges.get(t);if(!r)throw new to(`Graph.opposite: could not find the "${t}" edge in the graph.`);let i=r.source.key,n=r.target.key;if(e===i)return n;if(e===n)return i;throw new to(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${i}, ${n}).`)}hasExtremity(e,t){e=""+e,t=""+t;let r=this._edges.get(e);if(!r)throw new to(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;let t=this._edges.get(e);if(!t)throw new to(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;let t=this._edges.get(e);if(!t)throw new to(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;let t=this._edges.get(e);if(!t)throw new to(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return function(e,t,r){if(r&&!e7(r))throw new tn(`Graph.addNode: invalid attributes. Expecting an object but got "${r}"`);if(t=""+t,r=r||{},e._nodes.has(t))throw new ta(`Graph.addNode: the "${t}" node already exist in the graph.`);let i=new e.NodeDataClass(t,r);return e._nodes.set(t,i),e.emit("nodeAdded",{key:t,attributes:r}),i}(this,e,t).key}mergeNode(e,t){if(t&&!e7(t))throw new tn(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&(e4(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&"function"!=typeof t)throw new tn(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){let i=r.attributes;r.attributes=t(i),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}let i=t?t({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){let t;e=""+e;let r=this._nodes.get(e);if(!r)throw new to(`Graph.dropNode: could not find the "${e}" node in the graph.`);if("undirected"!==this.type){for(let e in r.out){t=r.out[e];do tM(this,t),t=t.next;while(t)}for(let e in r.in){t=r.in[e];do tM(this,t),t=t.next;while(t)}}if("directed"!==this.type)for(let e in r.undirected){t=r.undirected[e];do tM(this,t),t=t.next;while(t)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:r.attributes})}dropEdge(e){let t;if(arguments.length>1){let e=""+arguments[0],r=""+arguments[1];if(!(t=e8(this,e,r,this.type)))throw new to(`Graph.dropEdge: could not find the "${e}" -> "${r}" edge in the graph.`)}else if(e=""+e,!(t=this._edges.get(e)))throw new to(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return tM(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new ta("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ta("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");let r=e8(this,e=""+e,t=""+t,"directed");if(!r)throw new to(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return tM(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new ta("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ta("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");let r=e8(this,e,t,"undirected");if(!r)throw new to(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return tM(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){let e;let t=this._nodes.values();for(;!0!==(e=t.next()).done;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if("function"!=typeof t)throw new tn("Graph.updateAttribute: updater should be a function.");let r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!e7(e))throw new tn("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!e7(e))throw new tn("Graph.mergeAttributes: provided attributes are not a plain object.");return e4(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if("function"!=typeof e)throw new tn("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){let r,i;if("function"!=typeof e)throw new tn("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!tr(t))throw new tn("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");let n=this._nodes.values();for(;!0!==(r=n.next()).done;)(i=r.value).attributes=e(i.key,i.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){let r,i,n,o;if("function"!=typeof e)throw new tn("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!tr(t))throw new tn("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");let a=this._edges.values();for(;!0!==(r=a.next()).done;)n=(i=r.value).source,o=i.target,i.attributes=e(i.key,i.attributes,n.key,o.key,n.attributes,o.attributes,i.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if("function"!=typeof e)throw new tn("Graph.forEachAdjacencyEntry: expecting a callback.");tN(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if("function"!=typeof e)throw new tn("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");tN(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if("function"!=typeof e)throw new tn("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");tN(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if("function"!=typeof e)throw new tn("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");tN(!1,!0,!0,this,e)}nodes(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):e3()(this._nodes.keys(),this._nodes.size)}forEachNode(e){let t,r;if("function"!=typeof e)throw new tn("Graph.forEachNode: expecting a callback.");let i=this._nodes.values();for(;!0!==(t=i.next()).done;)e((r=t.value).key,r.attributes)}findNode(e){let t,r;if("function"!=typeof e)throw new tn("Graph.findNode: expecting a callback.");let i=this._nodes.values();for(;!0!==(t=i.next()).done;)if(e((r=t.value).key,r.attributes))return r.key}mapNodes(e){let t,r;if("function"!=typeof e)throw new tn("Graph.mapNode: expecting a callback.");let i=this._nodes.values(),n=Array(this.order),o=0;for(;!0!==(t=i.next()).done;)r=t.value,n[o++]=e(r.key,r.attributes);return n}someNode(e){let t,r;if("function"!=typeof e)throw new tn("Graph.someNode: expecting a callback.");let i=this._nodes.values();for(;!0!==(t=i.next()).done;)if(e((r=t.value).key,r.attributes))return!0;return!1}everyNode(e){let t,r;if("function"!=typeof e)throw new tn("Graph.everyNode: expecting a callback.");let i=this._nodes.values();for(;!0!==(t=i.next()).done;)if(!e((r=t.value).key,r.attributes))return!1;return!0}filterNodes(e){let t,r;if("function"!=typeof e)throw new tn("Graph.filterNodes: expecting a callback.");let i=this._nodes.values(),n=[];for(;!0!==(t=i.next()).done;)e((r=t.value).key,r.attributes)&&n.push(r.key);return n}reduceNodes(e,t){let r,i;if("function"!=typeof e)throw new tn("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new tn("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=t,o=this._nodes.values();for(;!0!==(r=o.next()).done;)n=e(n,(i=r.value).key,i.attributes);return n}nodeEntries(){let e=this._nodes.values();return new(e1())(()=>{let t=e.next();if(t.done)return t;let r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){let e=Array(this._nodes.size),t=0;this._nodes.forEach((r,i)=>{e[t++]=function(e,t){let r={key:e};return e9(t.attributes)||(r.attributes=e4({},t.attributes)),r}(i,r)});let r=Array(this._edges.size);return t=0,this._edges.forEach((e,i)=>{r[t++]=function(e,t,r){let i={key:t,source:r.source.key,target:r.target.key};return e9(r.attributes)||(i.attributes=e4({},r.attributes)),"mixed"===e&&r.undirected&&(i.undirected=!0),i}(this.type,i,e)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){let r,i,n,o,a;if(e instanceof tP)return e.forEachNode((e,r)=>{t?this.mergeNode(e,r):this.addNode(e,r)}),e.forEachEdge((e,r,i,n,o,a,s)=>{t?s?this.mergeUndirectedEdgeWithKey(e,i,n,r):this.mergeDirectedEdgeWithKey(e,i,n,r):s?this.addUndirectedEdgeWithKey(e,i,n,r):this.addDirectedEdgeWithKey(e,i,n,r)}),this;if(!e7(e))throw new tn("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!e7(e.attributes))throw new tn("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}if(e.nodes){if(!Array.isArray(n=e.nodes))throw new tn("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=n.length;r<i;r++){!function(e){if(!e7(e))throw new tn('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new tn("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!e7(e.attributes)||null===e.attributes))throw new tn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}(o=n[r]);let{key:e,attributes:i}=o;t?this.mergeNode(e,i):this.addNode(e,i)}}if(e.edges){let o=!1;if("undirected"===this.type&&(o=!0),!Array.isArray(n=e.edges))throw new tn("Graph.import: invalid edges. Expecting an array.");for(r=0,i=n.length;r<i;r++){!function(e){if(!e7(e))throw new tn('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new tn("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new tn("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!e7(e.attributes)||null===e.attributes))throw new tn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&"boolean"!=typeof e.undirected)throw new tn("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}(a=n[r]);let{source:e,target:i,attributes:s,undirected:d=o}=a;"key"in a?(t?d?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:d?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,a.key,e,i,s):(t?d?this.mergeUndirectedEdge:this.mergeDirectedEdge:d?this.addUndirectedEdge:this.addDirectedEdge).call(this,e,i,s)}}return this}nullCopy(e){let t=new tP(e4({},this._options,e));return t.replaceAttributes(e4({},this.getAttributes())),t}emptyCopy(e){let t=this.nullCopy(e);return this._nodes.forEach((e,r)=>{let i=e4({},e.attributes);e=new t.NodeDataClass(r,i),t._nodes.set(r,e)}),t}copy(e){let t,r;if("string"==typeof(e=e||{}).type&&e.type!==this.type&&"mixed"!==e.type)throw new ta(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if("boolean"==typeof e.multi&&e.multi!==this.multi&&!0!==e.multi)throw new ta("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof e.allowSelfLoops&&e.allowSelfLoops!==this.allowSelfLoops&&!0!==e.allowSelfLoops)throw new ta("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");let i=this.emptyCopy(e),n=this._edges.values();for(;!0!==(t=n.next()).done;)tj(i,"copy",!1,(r=t.value).undirected,r.key,r.source.key,r.target.key,e4({},r.attributes));return i}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){let e={};this._nodes.forEach((t,r)=>{e[r]=t.attributes});let t={},r={};this._edges.forEach((e,i)=>{let n;let o=e.undirected?"--":"->",a="",s=e.source.key,d=e.target.key;e.undirected&&s>d&&(n=s,s=d,d=n);let u=`(${s})${o}(${d})`;i.startsWith("geid_")?this.multi&&(void 0===r[u]?r[u]=0:r[u]++,a+=`${r[u]}. `):a+=`[${i}]: `,t[a+=u]=e.attributes});let i={};for(let e in this)this.hasOwnProperty(e)&&!tD.has(e)&&"function"!=typeof this[e]&&"symbol"!=typeof e&&(i[e]=this[e]);return i.attributes=this._attributes,i.nodes=e,i.edges=t,te(i,"constructor",this.constructor),i}}"undefined"!=typeof Symbol&&(tP.prototype[Symbol.for("nodejs.util.inspect.custom")]=tP.prototype.inspect),[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}].forEach(e=>{["add","merge","update"].forEach(t=>{let r=e.name(t),i="add"===t?tj:tz;e.generateKey?tP.prototype[r]=function(n,o,a){return i(this,r,!0,"undirected"===(e.type||this.type),null,n,o,a,"update"===t)}:tP.prototype[r]=function(n,o,a,s){return i(this,r,!1,"undirected"===(e.type||this.type),n,o,a,s,"update"===t)}})}),function(e){tc.forEach(function({name:t,attacher:r}){r(e,t("Node"),0),r(e,t("Source"),1),r(e,t("Target"),2),r(e,t("Opposite"),3)})}(tP),function(e){tf.forEach(function({name:t,attacher:r}){r(e,t("Edge"),"mixed"),r(e,t("DirectedEdge"),"directed"),r(e,t("UndirectedEdge"),"undirected")})}(tP),function(e){tp.forEach(t=>{(function(e,t){let{name:r,type:i,direction:n}=t;e.prototype[r]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];if(!arguments.length)return function(e,t){let r,i;if(0===e.size)return[];if("mixed"===t||t===e.type)return"function"==typeof Array.from?Array.from(e._edges.keys()):e3()(e._edges.keys(),e._edges.size);let n=Array("undirected"===t?e.undirectedSize:e.directedSize),o="undirected"===t,a=e._edges.values(),s=0;for(;!0!==(r=a.next()).done;)(i=r.value).undirected===o&&(n[s++]=i.key);return n}(this,i);if(1==arguments.length){e=""+e;let t=this._nodes.get(e);if(void 0===t)throw new to(`Graph.${r}: could not find the "${e}" node in the graph.`);return function(e,t,r,i){let n=[];return tE(!1,e,t,r,i,function(e){n.push(e)}),n}(this.multi,"mixed"===i?this.type:i,n,t)}if(2==arguments.length){e=""+e,t=""+t;let o=this._nodes.get(e);if(!o)throw new to(`Graph.${r}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new to(`Graph.${r}:  could not find the "${t}" target node in the graph.`);return function(e,t,r,i,n){let o=[];return t_(!1,e,t,r,i,n,function(e){o.push(e)}),o}(i,this.multi,n,o,t)}throw new tn(`Graph.${r}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}})(e,t),function(e,t){let{name:r,type:i,direction:n}=t,o="forEach"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[o]=function(e,t,r){if("mixed"===i||"mixed"===this.type||i===this.type){if(1==arguments.length)return tw(!1,this,i,r=e);if(2==arguments.length){e=""+e,r=t;let a=this._nodes.get(e);if(void 0===a)throw new to(`Graph.${o}: could not find the "${e}" node in the graph.`);return tE(!1,this.multi,"mixed"===i?this.type:i,n,a,r)}if(3==arguments.length){e=""+e,t=""+t;let a=this._nodes.get(e);if(!a)throw new to(`Graph.${o}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new to(`Graph.${o}:  could not find the "${t}" target node in the graph.`);return t_(!1,i,this.multi,n,a,t,r)}throw new tn(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};let a="map"+r[0].toUpperCase()+r.slice(1);e.prototype[a]=function(){let e;let t=Array.prototype.slice.call(arguments),r=t.pop();if(0===t.length){let n=0;"directed"!==i&&(n+=this.undirectedSize),"undirected"!==i&&(n+=this.directedSize),e=Array(n);let o=0;t.push((t,i,n,a,s,d,u)=>{e[o++]=r(t,i,n,a,s,d,u)})}else e=[],t.push((t,i,n,o,a,s,d)=>{e.push(r(t,i,n,o,a,s,d))});return this[o].apply(this,t),e};let s="filter"+r[0].toUpperCase()+r.slice(1);e.prototype[s]=function(){let e=Array.prototype.slice.call(arguments),t=e.pop(),r=[];return e.push((e,i,n,o,a,s,d)=>{t(e,i,n,o,a,s,d)&&r.push(e)}),this[o].apply(this,e),r};let d="reduce"+r[0].toUpperCase()+r.slice(1);e.prototype[d]=function(){let e,t,r=Array.prototype.slice.call(arguments);if(r.length<2||r.length>4)throw new tn(`Graph.${d}: invalid number of arguments (expecting 2, 3 or 4 and got ${r.length}).`);if("function"==typeof r[r.length-1]&&"function"!=typeof r[r.length-2])throw new tn(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);2===r.length?(e=r[0],t=r[1],r=[]):3===r.length?(e=r[1],t=r[2],r=[r[0]]):4===r.length&&(e=r[2],t=r[3],r=[r[0],r[1]]);let i=t;return r.push((t,r,n,o,a,s,d)=>{i=e(i,t,r,n,o,a,s,d)}),this[o].apply(this,r),i}}(e,t),function(e,t){let{name:r,type:i,direction:n}=t,o="find"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[o]=function(e,t,r){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return!1;if(1==arguments.length)return tw(!0,this,i,r=e);if(2==arguments.length){e=""+e,r=t;let a=this._nodes.get(e);if(void 0===a)throw new to(`Graph.${o}: could not find the "${e}" node in the graph.`);return tE(!0,this.multi,"mixed"===i?this.type:i,n,a,r)}if(3==arguments.length){e=""+e,t=""+t;let a=this._nodes.get(e);if(!a)throw new to(`Graph.${o}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new to(`Graph.${o}:  could not find the "${t}" target node in the graph.`);return t_(!0,i,this.multi,n,a,t,r)}throw new tn(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};let a="some"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[a]=function(){let e=Array.prototype.slice.call(arguments),t=e.pop();return e.push((e,r,i,n,o,a,s)=>t(e,r,i,n,o,a,s)),!!this[o].apply(this,e)};let s="every"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[s]=function(){let e=Array.prototype.slice.call(arguments),t=e.pop();return e.push((e,r,i,n,o,a,s)=>!t(e,r,i,n,o,a,s)),!this[o].apply(this,e)}}(e,t),function(e,t){let{name:r,type:i,direction:n}=t,o=r.slice(0,-1)+"Entries";e.prototype[o]=function(e,t){var r;if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return e1().empty();if(!arguments.length)return function(e,t){if(0===e.size)return e1().empty();let r="mixed"!==t&&t!==e.type,i="undirected"===t,n=e._edges.values();return new(e1())(function(){let e,t;for(;;){if((e=n.next()).done)return e;if(t=e.value,!r||t.undirected===i)break}return{value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected},done:!1}})}(this,i);if(1==arguments.length){let t;e=""+e;let r=this._nodes.get(e);if(!r)throw new to(`Graph.${o}: could not find the "${e}" node in the graph.`);return t=e1().empty(),"undirected"!==i&&("out"!==n&&void 0!==r.in&&(t=e5()(t,tv(r.in))),"in"!==n&&void 0!==r.out&&(t=e5()(t,tv(r.out,n?void 0:r.key)))),"directed"!==i&&void 0!==r.undirected&&(t=e5()(t,tv(r.undirected))),t}if(2==arguments.length){let a;e=""+e,t=""+t;let s=this._nodes.get(e);if(!s)throw new to(`Graph.${o}:  could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new to(`Graph.${o}:  could not find the "${t}" target node in the graph.`);return r=t,a=e1().empty(),"undirected"!==i&&(void 0!==s.in&&"out"!==n&&r in s.in&&(a=e5()(a,tx(s.in,r))),void 0!==s.out&&"in"!==n&&r in s.out&&(n||s.key!==r)&&(a=e5()(a,tx(s.out,r)))),"directed"!==i&&void 0!==s.undirected&&r in s.undirected&&(a=e5()(a,tx(s.undirected,r))),a}throw new tn(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}(e,t)})}(tP),function(e){tC.forEach(t=>{(function(e,t){let{name:r,type:i,direction:n}=t;e.prototype[r]=function(e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];e=""+e;let t=this._nodes.get(e);if(void 0===t)throw new to(`Graph.${r}: could not find the "${e}" node in the graph.`);return function(e,t,r){if("mixed"!==e){if("undirected"===e)return Object.keys(r.undirected);if("string"==typeof t)return Object.keys(r[t])}let i=[];return tS(!1,e,t,r,function(e){i.push(e)}),i}("mixed"===i?this.type:i,n,t)}})(e,t),function(e,t){let{name:r,type:i,direction:n}=t,o="forEach"+r[0].toUpperCase()+r.slice(1,-1);e.prototype[o]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return;e=""+e;let r=this._nodes.get(e);if(void 0===r)throw new to(`Graph.${o}: could not find the "${e}" node in the graph.`);tS(!1,"mixed"===i?this.type:i,n,r,t)};let a="map"+r[0].toUpperCase()+r.slice(1);e.prototype[a]=function(e,t){let r=[];return this[o](e,(e,i)=>{r.push(t(e,i))}),r};let s="filter"+r[0].toUpperCase()+r.slice(1);e.prototype[s]=function(e,t){let r=[];return this[o](e,(e,i)=>{t(e,i)&&r.push(e)}),r};let d="reduce"+r[0].toUpperCase()+r.slice(1);e.prototype[d]=function(e,t,r){if(arguments.length<3)throw new tn(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let i=r;return this[o](e,(e,r)=>{i=t(i,e,r)}),i}}(e,t),function(e,t){let{name:r,type:i,direction:n}=t,o=r[0].toUpperCase()+r.slice(1,-1),a="find"+o;e.prototype[a]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return;e=""+e;let r=this._nodes.get(e);if(void 0===r)throw new to(`Graph.${a}: could not find the "${e}" node in the graph.`);return tS(!0,"mixed"===i?this.type:i,n,r,t)},e.prototype["some"+o]=function(e,t){return!!this[a](e,t)},e.prototype["every"+o]=function(e,t){return!this[a](e,(e,r)=>!t(e,r))}}(e,t),function(e,t){let{name:r,type:i,direction:n}=t,o=r.slice(0,-1)+"Entries";e.prototype[o]=function(e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return e1().empty();e=""+e;let t=this._nodes.get(e);if(void 0===t)throw new to(`Graph.${o}: could not find the "${e}" node in the graph.`);return function(e,t,r){if("mixed"!==e){if("undirected"===e)return tT(null,r,r.undirected);if("string"==typeof t)return tT(null,r,r[t])}let i=e1().empty(),n=new tk;return"undirected"!==e&&("out"!==t&&(i=e5()(i,tT(n,r,r.in))),"in"!==t&&(i=e5()(i,tT(n,r,r.out)))),"directed"!==e&&(i=e5()(i,tT(n,r,r.undirected))),i}("mixed"===i?this.type:i,n,t)}}(e,t)})}(tP);class tI extends tP{constructor(e){let t=e4({type:"directed"},e);if("multi"in t&&!1!==t.multi)throw new tn("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==t.type)throw new tn('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class tO extends tP{constructor(e){let t=e4({type:"undirected"},e);if("multi"in t&&!1!==t.multi)throw new tn("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==t.type)throw new tn('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class tU extends tP{constructor(e){let t=e4({multi:!0},e);if("multi"in t&&!0!==t.multi)throw new tn("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class t$ extends tP{constructor(e){let t=e4({type:"directed",multi:!0},e);if("multi"in t&&!0!==t.multi)throw new tn("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==t.type)throw new tn('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class tB extends tP{constructor(e){let t=e4({type:"undirected",multi:!0},e);if("multi"in t&&!0!==t.multi)throw new tn("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==t.type)throw new tn('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function tW(e){e.from=function(t,r){let i=new e(e4({},t.options,r));return i.import(t),i}}tW(tP),tW(tI),tW(tO),tW(tU),tW(t$),tW(tB),tP.Graph=tP,tP.DirectedGraph=tI,tP.UndirectedGraph=tO,tP.MultiGraph=tU,tP.MultiDirectedGraph=t$,tP.MultiUndirectedGraph=tB,tP.InvalidArgumentsGraphError=tn,tP.NotFoundGraphError=to,tP.UsageGraphError=ta;let tH=({nodes:e,onNodeClick:t,isLoading:r})=>((0,o.useEffect)(()=>{e.length},[e]),n.jsx("div",{id:"sigma-container",className:"bg-white rounded-xl",style:{width:"100%",height:"80vh"}}));function tV({open:e,onClose:t,node:r,position:i}){return r?n.jsx(eV,{open:e,onOpenChange:t,children:n.jsx(eq,{className:"w-fit min-w-[240px] z-50 gap-3 py-8 shadow-none border-4 border-[#FCF4EE]",style:{position:"fixed",left:i.x,top:i.y},children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[n.jsx(eY.default,{src:r.image,width:84,height:84,alt:r.label}),n.jsx("h4",{className:"font-bold text-primary-dark",children:"USER NAME"}),n.jsx("span",{className:"flex items-center justify-center space-x-2 text-light font-normal",children:"USER POINTS"})]}),n.jsx(em.z,{type:"button",variant:"primary",className:"px-8 mt-4",onClick:t,children:"Join"})]})})}):null}var tq=r(43862),tY=r.n(tq),tZ=r(11272),tK=r.n(tZ),tX=r(22918),tJ=r.n(tX);function tQ(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function t0(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function t1(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t0(i.key),i)}}function t2(e,t,r){return t&&t1(e.prototype,t),r&&t1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t3(e){return(t3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t6=function(){return!!e})()}function t5(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t4(e,t,r){return t=t3(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return t5(e)}(e,t6()?Reflect.construct(t,r||[],t3(e).constructor):t.apply(e,r))}function t8(e,t){return(t8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function t7(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t8(e,t)}function t9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function re(e,t){if(e){if("string"==typeof e)return t9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t9(e,t)}}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],d=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);d=!0);}catch(e){u=!0,n=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return s}}(e,t)||re(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rr={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},ri=new Int8Array(4),rn=new Int32Array(ri.buffer,0,1),ro=new Float32Array(ri.buffer,0,1),ra=/^\s*rgba?\s*\(/,rs=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/,rd={};for(var ru in rr)rd[ru]=rh(rr[ru]),rd[rr[ru]]=rd[ru];function rl(e,t,r,i,n){return rn[0]=i<<24|r<<16|t<<8|e,n&&(rn[0]=4278190079&rn[0]),ro[0]}function rh(e){if(void 0!==rd[e=e.toLowerCase()])return rd[e];var t=function(e){var t=0,r=0,i=0,n=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(2),16),i=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(4),16),i=parseInt(e.charAt(5)+e.charAt(6),16)),9===e.length&&(n=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(ra.test(e)){var o=e.match(rs);o&&(t=+o[1],r=+o[2],i=+o[3],o[4]&&(n=+o[4]))}return{r:t,g:r,b:i,a:n}}(e),r=t.r,i=t.g,n=t.b,o=t.a,a=rl(r,i,n,o=255*o|0,!0);return rd[e]=a,a}var rc={};function rf(e){if(void 0!==rc[e])return rc[e];var t=rl((16711680&e)>>>16,(65280&e)>>>8,255&e,255,!0);return rc[e]=t,t}function rp(e,t,r,i){return r+(t<<8)+(e<<16)}function rg(e,t,r,i,n,o){var a=Math.floor(e.drawingBufferHeight/o-i/o*n),s=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(Math.floor(r/o*n),a,1,1,e.RGBA,e.UNSIGNED_BYTE,s);var d=rt(s,4);return[d[0],d[1],d[2],d[3]]}function rm(e,t,r){return(t=t0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function ry(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(r),!0).forEach(function(t){rm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rb(e,t,r){var i="VERTEX"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER,n=t.createShader(i);if(null===n)throw Error("loadShader: error while creating the shader");if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(n);throw t.deleteShader(n),Error("loadShader: error while compiling the shader:\n".concat(o,"\n").concat(r))}return n}var rx="#define PICKING_MODE\n",rw=rm(rm(rm(rm(rm(rm(rm(rm({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4);function rE(e){var t=0;return e.forEach(function(e){return t+=e.normalized?1:e.size}),t}var r_=function(){function e(t,r,i){tQ(this,e),rm(this,"array",new Float32Array),rm(this,"constantArray",new Float32Array),rm(this,"capacity",0),rm(this,"verticesCount",0);var n=this.getDefinition();if(this.VERTICES=n.VERTICES,this.VERTEX_SHADER_SOURCE=n.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=n.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=n.UNIFORMS,this.ATTRIBUTES=n.ATTRIBUTES,this.METHOD=n.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in n?n.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in n?n.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in n,this.ATTRIBUTES_ITEMS_COUNT=rE(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",t,n.VERTEX_SHADER_SOURCE,n.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=r?this.getProgramInfo("pick",t,rx+n.VERTEX_SHADER_SOURCE,rx+n.FRAGMENT_SHADER_SOURCE,r):null,this.isInstanced){var o=rE(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var a=0;a<this.CONSTANT_DATA.length;a++){var s=this.CONSTANT_DATA[a];if(s.length!==o)throw Error("Program: error while getting constant data (one vector has ".concat(s.length," items instead of ").concat(o,")"));for(var d=0;d<s.length;d++)this.constantArray[a*o+d]=s[d]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return t2(e,[{key:"getProgramInfo",value:function(e,t,r,i,n){var o,a=this.getDefinition(),s=t.createBuffer();if(null===s)throw Error("Program: error while creating the WebGL buffer.");var d=rb("VERTEX",t,r),u=rb("FRAGMENT",t,i),l=function(e,t){var r,i,n=e.createProgram();if(null===n)throw Error("loadProgram: error while creating the program.");for(r=0,i=t.length;r<i;r++)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw e.deleteProgram(n),Error("loadProgram: error while linking the program.");return n}(t,[d,u]),h={};a.UNIFORMS.forEach(function(e){var r=t.getUniformLocation(l,e);r&&(h[e]=r)});var c={};if(a.ATTRIBUTES.forEach(function(e){c[e.name]=t.getAttribLocation(l,e.name)}),"CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(e){c[e.name]=t.getAttribLocation(l,e.name)}),null===(o=t.createBuffer())))throw Error("Program: error while creating the WebGL constant buffer.");return{name:e,program:l,gl:t,frameBuffer:n,buffer:s,constantBuffer:o||{},uniformLocations:h,attributeLocations:c,isPicking:"pick"===e}}},{key:"bindProgram",value:function(e){var t=this,r=0,i=e.gl,n=e.buffer;this.isInstanced?(i.bindBuffer(i.ARRAY_BUFFER,e.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(i){return r+=t.bindAttribute(i,e,r,!1)}),i.bufferData(i.ARRAY_BUFFER,this.constantArray,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,e.buffer),r=0,this.ATTRIBUTES.forEach(function(i){return r+=t.bindAttribute(i,e,r,!0)})):(i.bindBuffer(i.ARRAY_BUFFER,n),r=0,this.ATTRIBUTES.forEach(function(i){return r+=t.bindAttribute(i,e,r)})),i.bufferData(i.ARRAY_BUFFER,this.array,i.DYNAMIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(e){var t=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return t.unbindAttribute(r,e,!1)}),this.ATTRIBUTES.forEach(function(r){return t.unbindAttribute(r,e,!0)})):this.ATTRIBUTES.forEach(function(r){return t.unbindAttribute(r,e)})}},{key:"bindAttribute",value:function(e,t,r,i){var n=rw[e.type];if("number"!=typeof n)throw Error('Program.bind: yet unsupported attribute type "'.concat(e.type,'"'));var o=t.attributeLocations[e.name],a=t.gl;if(-1!==o){a.enableVertexAttribArray(o);var s=this.isInstanced?(i?this.ATTRIBUTES_ITEMS_COUNT:rE(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(a.vertexAttribPointer(o,e.size,e.type,e.normalized||!1,s,r),this.isInstanced&&i){if(a instanceof WebGL2RenderingContext)a.vertexAttribDivisor(o,1);else{var d=a.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(o,1)}}}return e.size*n}},{key:"unbindAttribute",value:function(e,t,r){var i=t.attributeLocations[e.name],n=t.gl;if(-1!==i&&(n.disableVertexAttribArray(i),this.isInstanced&&r)){if(n instanceof WebGL2RenderingContext)n.vertexAttribDivisor(i,0);else{var o=n.getExtension("ANGLE_instanced_arrays");o&&o.vertexAttribDivisorANGLE(i,0)}}}},{key:"reallocate",value:function(e){e!==this.capacity&&(this.capacity=e,this.verticesCount=this.VERTICES*e,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return 0===this.verticesCount}},{key:"renderProgram",value:function(e,t){var r=t.gl,i=t.program;r.enable(r.BLEND),r.useProgram(i),this.setUniforms(e,t),this.drawWebGL(this.METHOD,t)}},{key:"render",value:function(e){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,e.width*e.pixelRatio/e.downSizingRatio,e.height*e.pixelRatio/e.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(ry(ry({},e),{},{pixelRatio:e.pixelRatio/e.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,e.width*e.pixelRatio,e.height*e.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(e,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(e,t){var r=t.gl,i=t.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,i),this.isInstanced){if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(e,0,this.VERTICES,this.capacity);else{var n=r.getExtension("ANGLE_instanced_arrays");n&&n.drawArraysInstancedANGLE(e,0,this.VERTICES,this.capacity)}}else r.drawArrays(e,0,this.verticesCount)}}]),e}(),rC=function(e){function t(){return tQ(this,t),t4(this,t,arguments)}return t7(t,e),t2(t,[{key:"kill",value:function(){}},{key:"process",value:function(e,t,r){var i=t*this.STRIDE;if(r.hidden){for(var n=i+this.STRIDE;i<n;i++)this.array[i]=0;return}return this.processVisibleItem(rf(e),i,r)}}]),t}(r_),rk=function(e){function t(){var e;tQ(this,t);for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];return rm(t5(e=t4(this,t,[].concat(i))),"drawLabel",void 0),e}return t7(t,e),t2(t,[{key:"kill",value:function(){}},{key:"process",value:function(e,t,r,i,n){var o=t*this.STRIDE;if(n.hidden||r.hidden||i.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem(rf(e),o,r,i,n)}}]),t}(r_);function rA(e,t,r){if(t.label){var i=r.labelSize,n=r.labelFont,o=r.labelWeight,a=r.labelColor.attribute?t[r.labelColor.attribute]||r.labelColor.color||"#000":r.labelColor.color;e.fillStyle=a,e.font="".concat(o," ").concat(i,"px ").concat(n),e.fillText(t.label,t.x+t.size+3,t.y+i/3)}}var rS=WebGLRenderingContext,rT=rS.UNSIGNED_BYTE,rN=rS.FLOAT,rR=["u_sizeRatio","u_correctionRatio","u_matrix"],rL=function(e){function t(){return tQ(this,t),t4(this,t,arguments)}return t7(t,e),t2(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_diffVector = diffVector;\n  v_radius = size / 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\nuniform float u_correctionRatio;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float border = u_correctionRatio * 2.0;\n  float dist = length(v_diffVector) - v_radius + border;\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > border)\n    gl_FragColor = transparent;\n  else\n    gl_FragColor = v_color;\n\n  #else\n  float t = 0.0;\n  if (dist > border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / border;\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:rR,ATTRIBUTES:[{name:"a_position",size:2,type:rN},{name:"a_size",size:1,type:rN},{name:"a_color",size:4,type:rT,normalized:!0},{name:"a_id",size:4,type:rT,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:rN}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(e,t,r){var i=this.array,n=rh(r.color);i[t++]=r.x,i[t++]=r.y,i[t++]=r.size,i[t++]=n,i[t++]=e}},{key:"setUniforms",value:function(e,t){var r=t.gl,i=t.uniformLocations,n=i.u_sizeRatio,o=i.u_correctionRatio,a=i.u_matrix;r.uniform1f(o,e.correctionRatio),r.uniform1f(n,e.sizeRatio),r.uniformMatrix3fv(a,!1,e.matrix)}}]),t}(rC);rm(rL,"ANGLE_1",0),rm(rL,"ANGLE_2",2*Math.PI/3),rm(rL,"ANGLE_3",4*Math.PI/3);var rD=WebGLRenderingContext,rG=rD.UNSIGNED_BYTE,rF=rD.FLOAT,rj=["u_matrix","u_sizeRatio","u_correctionRatio"],rz=function(e){function t(){return tQ(this,t),t4(this,t,arguments)}return t7(t,e),t2(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec3 a_barycentric;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\n#else\nattribute vec4 a_color;\n#endif\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:rj,ATTRIBUTES:[{name:"a_position",size:2,type:rF},{name:"a_normal",size:2,type:rF},{name:"a_radius",size:1,type:rF},{name:"a_color",size:4,type:rG,normalized:!0},{name:"a_id",size:4,type:rG,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:rF}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(e,t,r,i,n){var o=n.size||1,a=i.size||1,s=r.x,d=r.y,u=i.x,l=i.y,h=rh(n.color),c=u-s,f=l-d,p=c*c+f*f,g=0,m=0;p&&(g=-f*(p=1/Math.sqrt(p))*o,m=c*p*o);var v=this.array;v[t++]=u,v[t++]=l,v[t++]=-g,v[t++]=-m,v[t++]=a,v[t++]=h,v[t++]=e}},{key:"setUniforms",value:function(e,t){var r=t.gl,i=t.uniformLocations,n=i.u_matrix,o=i.u_sizeRatio,a=i.u_correctionRatio;r.uniformMatrix3fv(n,!1,e.matrix),r.uniform1f(o,e.sizeRatio),r.uniform1f(a,e.correctionRatio)}}]),t}(rk);function rM(){return(rM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=t3(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}var rP=WebGLRenderingContext,rI=rP.UNSIGNED_BYTE,rO=rP.FLOAT,rU=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],r$=function(e){function t(){return tQ(this,t),t4(this,t,arguments)}return t7(t,e),t2(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:'\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // We require edges to be at least "minThickness" pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n',FRAGMENT_SHADER_SOURCE:"\nprecision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  // We only handle antialiasing for normal mode:\n  #ifdef PICKING_MODE\n  gl_FragColor = v_color;\n  #else\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:rU,ATTRIBUTES:[{name:"a_positionStart",size:2,type:rO},{name:"a_positionEnd",size:2,type:rO},{name:"a_normal",size:2,type:rO},{name:"a_color",size:4,type:rI,normalized:!0},{name:"a_id",size:4,type:rI,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:rO},{name:"a_normalCoef",size:1,type:rO}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(e,t,r,i,n){var o=n.size||1,a=r.x,s=r.y,d=i.x,u=i.y,l=rh(n.color),h=d-a,c=u-s,f=h*h+c*c,p=0,g=0;f&&(p=-c*(f=1/Math.sqrt(f))*o,g=h*f*o);var m=this.array;m[t++]=a,m[t++]=s,m[t++]=d,m[t++]=u,m[t++]=p,m[t++]=g,m[t++]=l,m[t++]=e}},{key:"setUniforms",value:function(e,t){var r=t.gl,i=t.uniformLocations,n=i.u_matrix,o=i.u_zoomRatio,a=i.u_correctionRatio,s=i.u_sizeRatio;r.uniformMatrix3fv(n,!1,e.matrix),r.uniform1f(o,e.zoomRatio),r.uniform1f(s,e.sizeRatio),r.uniform1f(a,e.correctionRatio)}}]),t}(rk),rB=WebGLRenderingContext,rW=rB.UNSIGNED_BYTE,rH=rB.FLOAT,rV=(i=[function(e){function t(){return tQ(this,t),t4(this,t,arguments)}return t7(t,e),t2(t,[{key:"getDefinition",value:function(){return ry(ry({},rM(t3(t.prototype),"getDefinition",this).call(this)),{},{VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\nattribute float a_radius;\nattribute float a_radiusCoef;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float radius = a_radius * a_radiusCoef;\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(radius);\n  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",ATTRIBUTES:[{name:"a_positionStart",size:2,type:rH},{name:"a_positionEnd",size:2,type:rH},{name:"a_normal",size:2,type:rH},{name:"a_color",size:4,type:rW,normalized:!0},{name:"a_id",size:4,type:rW,normalized:!0},{name:"a_radius",size:1,type:rH}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:rH},{name:"a_normalCoef",size:1,type:rH},{name:"a_radiusCoef",size:1,type:rH}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]})}},{key:"processVisibleItem",value:function(e,t,r,i,n){var o=n.size||1,a=r.x,s=r.y,d=i.x,u=i.y,l=rh(n.color),h=d-a,c=u-s,f=i.size||1,p=h*h+c*c,g=0,m=0;p&&(g=-c*(p=1/Math.sqrt(p))*o,m=h*p*o);var v=this.array;v[t++]=a,v[t++]=s,v[t++]=d,v[t++]=u,v[t++]=g,v[t++]=m,v[t++]=l,v[t++]=e,v[t++]=f}}]),t}(r$),rz],function(){function e(t,r,n){tQ(this,e),rm(this,"drawLabel",void 0),this.programs=i.map(function(e){return new e(t,r,n)})}return t2(e,[{key:"reallocate",value:function(e){this.programs.forEach(function(t){return t.reallocate(e)})}},{key:"process",value:function(e,t,r,i,n){this.programs.forEach(function(o){return o.process(e,t,r,i,n)})}},{key:"render",value:function(e){this.programs.forEach(function(t){return t.render(e)})}},{key:"kill",value:function(){this.programs.forEach(function(e){return e.kill()})}}]),e}()),rq=function(e){function t(){var e;return tQ(this,t),(e=t4(this,t)).rawEmitter=t5(e),e}return t7(t,e),t2(t)}(eQ.EventEmitter),rY=r(14119),rZ=r.n(rY),rK={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},rX={easing:"quadraticInOut",duration:150};function rJ(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function rQ(e,t,r){return e[0]=t,e[4]="number"==typeof r?r:t,e}function r0(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[3]=-r,e[4]=i,e}function r1(e,t,r){return e[6]=t,e[7]=r,e}function r2(e,t){var r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],d=e[6],u=e[7],l=e[8],h=t[0],c=t[1],f=t[2],p=t[3],g=t[4],m=t[5],v=t[6],y=t[7],b=t[8];return e[0]=h*r+c*o+f*d,e[1]=h*i+c*a+f*u,e[2]=h*n+c*s+f*l,e[3]=p*r+g*o+m*d,e[4]=p*i+g*a+m*u,e[5]=p*n+g*s+m*l,e[6]=v*r+y*o+b*d,e[7]=v*i+y*a+b*u,e[8]=v*n+y*s+b*l,e}function r3(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e[0],n=e[1],o=e[3],a=e[4],s=e[6],d=e[7],u=t.x,l=t.y;return{x:u*i+l*o+s*r,y:u*n+l*a+d*r}}function r6(e,t,r,i,n){var o,a,s=e.angle,d=e.ratio,u=e.x,l=e.y,h=t.width,c=t.height,f=rJ(),p=Math.min(h,c)-2*i,g=(o=t.height/t.width,a=r.height/r.width,o<1&&a>1||o>1&&a<1?1:Math.min(Math.max(a,1/a),Math.max(1/o,o)));return n?(r2(f,r1(rJ(),u,l)),r2(f,rQ(rJ(),d)),r2(f,r0(rJ(),s)),r2(f,rQ(rJ(),h/p/2/g,c/p/2/g))):(r2(f,rQ(rJ(),p/h*2*g,p/c*2*g)),r2(f,r0(rJ(),-s)),r2(f,rQ(rJ(),1/d)),r2(f,r1(rJ(),-u,-l))),f}function r5(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1}function r4(e,t,r){return r.sort(function(e,r){var i=t(e)||0,n=t(r)||0;return i<n?-1:i>n?1:0})}function r8(e){var t=rt(e.x,2),r=t[0],i=t[1],n=rt(e.y,2),o=n[0],a=n[1],s=Math.max(i-r,a-o),d=(i+r)/2,u=(a+o)/2;(0===s||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(d)&&(d=0),isNaN(u)&&(u=0);var l=function(e){return{x:.5+(e.x-d)/s,y:.5+(e.y-u)/s}};return l.applyTo=function(e){e.x=.5+(e.x-d)/s,e.y=.5+(e.y-u)/s},l.inverse=function(e){return{x:d+s*(e.x-.5),y:u+s*(e.y-.5)}},l.ratio=s,l}function r7(e,t){var r=t.size;if(0!==r){var i=e.length;e.length+=r;var n=0;t.forEach(function(t){e[i+n]=t,n++})}}function r9(e){e=e||{};for(var t=0,r=arguments.length<=1?0:arguments.length-1;t<r;t++){var i=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];i&&Object.assign(e,i)}return e}var ie={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",defaultDrawEdgeLabel:function(e,t,r,i,n){var o,a=n.edgeLabelSize,s=n.edgeLabelFont,d=n.edgeLabelWeight,u=n.edgeLabelColor.attribute?t[n.edgeLabelColor.attribute]||n.edgeLabelColor.color||"#000":n.edgeLabelColor.color,l=t.label;if(l){e.fillStyle=u,e.font="".concat(d," ").concat(a,"px ").concat(s);var h=r.size,c=i.size,f=r.x,p=r.y,g=i.x,m=i.y,v=(f+g)/2,y=(p+m)/2,b=g-f,x=m-p,w=Math.sqrt(b*b+x*x);if(!(w<h+c)){f+=b*h/w,p+=x*h/w,g-=b*c/w,m-=x*c/w,v=(f+g)/2,y=(p+m)/2,w=Math.sqrt((b=g-f)*b+(x=m-p)*x);var E=e.measureText(l).width;if(E>w){for(l+="…",E=e.measureText(l).width;E>w&&l.length>1;)l=l.slice(0,-2)+"…",E=e.measureText(l).width;if(l.length<4)return}o=b>0?x>0?Math.acos(b/w):Math.asin(x/w):x>0?Math.acos(b/w)+Math.PI:Math.asin(b/w)+Math.PI/2,e.save(),e.translate(v,y),e.rotate(o),e.fillText(l,-E/2,t.size/2+a),e.restore()}}},defaultDrawNodeLabel:rA,defaultDrawNodeHover:function(e,t,r){var i=r.labelSize,n=r.labelFont,o=r.labelWeight;if(e.font="".concat(o," ").concat(i,"px ").concat(n),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000","string"==typeof t.label){var a=Math.round(e.measureText(t.label).width+5),s=Math.round(i+4),d=Math.max(t.size,i/2)+2,u=Math.asin(s/2/d),l=Math.sqrt(Math.abs(Math.pow(d,2)-Math.pow(s/2,2)));e.beginPath(),e.moveTo(t.x+l,t.y+s/2),e.lineTo(t.x+d+a,t.y+s/2),e.lineTo(t.x+d+a,t.y-s/2),e.lineTo(t.x+l,t.y-s/2),e.arc(t.x,t.y,d,u,-u),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+2,0,2*Math.PI),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,rA(e,t,r)},labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},it={circle:rL},ir={arrow:rV,line:r$};function ii(e){if("number"!=typeof e.labelDensity||e.labelDensity<0)throw Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=e.minCameraRatio,r=e.maxCameraRatio;if("number"==typeof t&&"number"==typeof r&&r<t)throw Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}var io=function(e){function t(){var e;return tQ(this,t),rm(t5(e=t4(this,t)),"x",.5),rm(t5(e),"y",.5),rm(t5(e),"angle",0),rm(t5(e),"ratio",1),rm(t5(e),"minRatio",null),rm(t5(e),"maxRatio",null),rm(t5(e),"nextFrame",null),rm(t5(e),"previousState",null),rm(t5(e),"enabled",!0),e.previousState=e.getState(),e}return t7(t,e),t2(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle}},{key:"getPreviousState",value:function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null}},{key:"getBoundedRatio",value:function(e){var t=e;return"number"==typeof this.minRatio&&(t=Math.max(t,this.minRatio)),"number"==typeof this.maxRatio&&(t=Math.min(t,this.maxRatio)),t}},{key:"validateState",value:function(e){var t={};return"number"==typeof e.x&&(t.x=e.x),"number"==typeof e.y&&(t.y=e.y),"number"==typeof e.angle&&(t.angle=e.angle),"number"==typeof e.ratio&&(t.ratio=this.getBoundedRatio(e.ratio)),t}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(e){if(!this.enabled)return this;this.previousState=this.getState();var t=this.validateState(e);return"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y),"number"==typeof t.angle&&(this.angle=t.angle),"number"==typeof t.ratio&&(this.ratio=t.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(e){return this.setState(e(this.getState())),this}},{key:"animate",value:function(e,t,r){var i=this;if(this.enabled){var n=Object.assign({},rX,t),o=this.validateState(e),a="function"==typeof n.easing?n.easing:rK[n.easing],s=Date.now(),d=this.getState(),u=function e(){var t=(Date.now()-s)/n.duration;if(t>=1){i.nextFrame=null,i.setState(o),i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0);return}var r=a(t),u={};"number"==typeof o.x&&(u.x=d.x+(o.x-d.x)*r),"number"==typeof o.y&&(u.y=d.y+(o.y-d.y)*r),"number"==typeof o.angle&&(u.angle=d.angle+(o.angle-d.angle)*r),"number"==typeof o.ratio&&(u.ratio=d.ratio+(o.ratio-d.ratio)*r),i.setState(u),i.nextFrame=requestAnimationFrame(e)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(u)):u(),this.animationCallback=r}}},{key:"animatedZoom",value:function(e){if(e){if("number"==typeof e)return this.animate({ratio:this.ratio/e});this.animate({ratio:this.ratio/(e.factor||1.5)},e)}else this.animate({ratio:this.ratio/1.5})}},{key:"animatedUnzoom",value:function(e){if(e){if("number"==typeof e)return this.animate({ratio:this.ratio*e});this.animate({ratio:this.ratio*(e.factor||1.5)},e)}else this.animate({ratio:1.5*this.ratio})}},{key:"animatedReset",value:function(e){this.animate({x:.5,y:.5,ratio:1,angle:0},e)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(e){return new t().setState(e)}}]),t}(rq);function ia(e,t){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}}function is(e,t){var r=ry(ry({},ia(e,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:e});return r}function id(e){for(var t=[],r=0,i=Math.min(e.length,2);r<i;r++)t.push(e[r]);return t}function iu(e,t){return{touches:id(e.touches).map(function(e){return ia(e,t)}),original:e}}function il(e){if(void 0!==e.deltaY)return -3*e.deltaY/360;if(void 0!==e.detail)return-(e.detail/9);throw Error("Captor: could not extract delta from event.")}var ih=function(e){function t(e,r){var i;return tQ(this,t),(i=t4(this,t)).container=e,i.renderer=r,i}return t7(t,e),t2(t)}(rq),ic=function(e){function t(e,r){var i;return tQ(this,t),rm(t5(i=t4(this,t,[e,r])),"enabled",!0),rm(t5(i),"draggedEvents",0),rm(t5(i),"downStartTime",null),rm(t5(i),"lastMouseX",null),rm(t5(i),"lastMouseY",null),rm(t5(i),"isMouseDown",!1),rm(t5(i),"isMoving",!1),rm(t5(i),"movingTimeout",null),rm(t5(i),"startCameraState",null),rm(t5(i),"clicks",0),rm(t5(i),"doubleClickTimeout",null),rm(t5(i),"currentWheelDirection",0),i.handleClick=i.handleClick.bind(t5(i)),i.handleRightClick=i.handleRightClick.bind(t5(i)),i.handleDown=i.handleDown.bind(t5(i)),i.handleUp=i.handleUp.bind(t5(i)),i.handleMove=i.handleMove.bind(t5(i)),i.handleWheel=i.handleWheel.bind(t5(i)),i.handleLeave=i.handleLeave.bind(t5(i)),i.handleEnter=i.handleEnter.bind(t5(i)),e.addEventListener("click",i.handleClick,!1),e.addEventListener("contextmenu",i.handleRightClick,!1),e.addEventListener("mousedown",i.handleDown,!1),e.addEventListener("wheel",i.handleWheel,!1),e.addEventListener("mouseleave",i.handleLeave,!1),e.addEventListener("mouseenter",i.handleEnter,!1),document.addEventListener("mousemove",i.handleMove,!1),document.addEventListener("mouseup",i.handleUp,!1),i}return t7(t,e),t2(t,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseleave",this.handleLeave),e.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(e){var t=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){t.clicks=0,t.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",is(e,this.container))}}},{key:"handleRightClick",value:function(e){this.enabled&&this.emit("rightClick",is(e,this.container))}},{key:"handleDoubleClick",value:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t=is(e,this.container);if(this.emit("doubleClick",t),!t.sigmaDefaultPrevented){var r=this.renderer.getCamera(),i=r.getBoundedRatio(r.getState().ratio/2.2);r.animate(this.renderer.getViewportZoomedState(ia(e,this.container),i),{easing:"quadraticInOut",duration:200})}}}},{key:"handleDown",value:function(e){if(this.enabled){if(0===e.button){this.startCameraState=this.renderer.getCamera().getState();var t=ia(e,this.container),r=t.x,i=t.y;this.lastMouseX=r,this.lastMouseY=i,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",is(e,this.container))}}},{key:"handleUp",value:function(e){var t=this;if(this.enabled&&this.isMouseDown){var r=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var i=ia(e,this.container),n=i.x,o=i.y,a=r.getState(),s=r.getPreviousState()||{x:0,y:0};this.isMoving?r.animate({x:a.x+3*(a.x-s.x),y:a.y+3*(a.y-s.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==n||this.lastMouseY!==o)&&r.setState({x:a.x,y:a.y}),this.isMoving=!1,setTimeout(function(){var e=t.draggedEvents>0;t.draggedEvents=0,e&&t.renderer.refresh()},0),this.emit("mouseup",is(e,this.container))}}},{key:"handleMove",value:function(e){var t=this;if(this.enabled){var r=is(e,this.container);if(this.emit("mousemovebody",r),e.target===this.container&&this.emit("mousemove",r),!r.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){t.movingTimeout=null,t.isMoving=!1},100);var i=this.renderer.getCamera(),n=ia(e,this.container),o=n.x,a=n.y,s=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),d=this.renderer.viewportToFramedGraph({x:o,y:a}),u=s.x-d.x,l=s.y-d.y,h=i.getState(),c=h.x+u,f=h.y+l;i.setState({x:c,y:f}),this.lastMouseX=o,this.lastMouseY=a,e.preventDefault(),e.stopPropagation()}}}},{key:"handleLeave",value:function(e){this.emit("mouseleave",is(e,this.container))}},{key:"handleEnter",value:function(e){this.emit("mouseenter",is(e,this.container))}},{key:"handleWheel",value:function(e){var t=this;if(this.enabled){e.preventDefault(),e.stopPropagation();var r=il(e);if(r){var i=ry(ry({},is(e,this.container)),{},{delta:il(e)});if(this.emit("wheel",i),!i.sigmaDefaultPrevented){var n=this.renderer.getCamera(),o=n.getBoundedRatio(n.getState().ratio*(r>0?.5882352941176471:1.7)),a=r>0?1:-1,s=Date.now();if(this.currentWheelDirection===a&&this.lastWheelTriggerTime&&s-this.lastWheelTriggerTime<50)return;n.animate(this.renderer.getViewportZoomedState(ia(e,this.container),o),{easing:"quadraticOut",duration:250},function(){t.currentWheelDirection=0}),this.currentWheelDirection=a,this.lastWheelTriggerTime=s}}}}}]),t}(ih),ip=function(e){function t(e,r){var i;return tQ(this,t),rm(t5(i=t4(this,t,[e,r])),"enabled",!0),rm(t5(i),"isMoving",!1),rm(t5(i),"hasMoved",!1),rm(t5(i),"touchMode",0),rm(t5(i),"startTouchesPositions",[]),i.handleStart=i.handleStart.bind(t5(i)),i.handleLeave=i.handleLeave.bind(t5(i)),i.handleMove=i.handleMove.bind(t5(i)),e.addEventListener("touchstart",i.handleStart,!1),e.addEventListener("touchend",i.handleLeave,!1),e.addEventListener("touchcancel",i.handleLeave,!1),e.addEventListener("touchmove",i.handleMove,!1),i}return t7(t,e),t2(t,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchend",this.handleLeave),e.removeEventListener("touchcancel",this.handleLeave),e.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"dispatchRelatedMouseEvent",value:function(e,t,r,i){var n=r||t.touches[0],o=new MouseEvent(e,{clientX:n.clientX,clientY:n.clientY,altKey:t.altKey,ctrlKey:t.ctrlKey});o.isFakeSigmaMouseEvent=!0,(i||this.container).dispatchEvent(o)}},{key:"handleStart",value:function(e){var t=this;if(this.enabled){e.preventDefault(),1===e.touches.length&&this.dispatchRelatedMouseEvent("mousedown",e);var r=id(e.touches);if(this.touchMode=r.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=r.map(function(e){return ia(e,t.container)}),this.lastTouches=r,this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var i=rt(this.startTouchesPositions,2),n=i[0],o=n.x,a=n.y,s=i[1],d=s.x,u=s.y;this.startTouchesAngle=Math.atan2(u-a,d-o),this.startTouchesDistance=Math.sqrt(Math.pow(d-o,2)+Math.pow(u-a,2))}this.emit("touchdown",iu(e,this.container))}}},{key:"handleLeave",value:function(e){if(this.enabled){switch(e.preventDefault(),0===e.touches.length&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",e,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",e,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===e.touches.length){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var t=this.renderer.getCamera(),r=t.getState(),i=t.getPreviousState()||{x:0,y:0};t.animate({x:r.x+3*(r.x-i.x),y:r.y+3*(r.y-i.y)},{duration:200,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0}this.emit("touchup",iu(e,this.container))}}},{key:"handleMove",value:function(e){var t=this;if(this.enabled){e.preventDefault(),1===e.touches.length&&this.dispatchRelatedMouseEvent("mousemove",e);var r=id(e.touches),i=r.map(function(e){return ia(e,t.container)});if(this.lastTouches=r,this.lastTouchesPositions=i,this.hasMoved||(this.hasMoved=i.some(function(e,r){var i=t.startTouchesPositions[r];return e.x!==i.x||e.y!==i.y})),!this.hasMoved)return;this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){t.isMoving=!1},200);var n=this.renderer.getCamera(),o=this.startCameraState;switch(this.touchMode){case 1:var a=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),s=a.x,d=a.y,u=this.renderer.viewportToFramedGraph(i[0]),l=u.x,h=u.y;n.setState({x:o.x+s-l,y:o.y+d-h});break;case 2:var c={},f=i[0],p=f.x,g=f.y,m=i[1],v=m.x,y=m.y,b=Math.atan2(y-g,v-p)-this.startTouchesAngle,x=Math.hypot(y-g,v-p)/this.startTouchesDistance,w=n.getBoundedRatio(o.ratio/x);c.ratio=w,c.angle=o.angle+b;var E=this.getDimensions(),_=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:o}),C=Math.min(E.width,E.height),k=C/E.width,A=C/E.height,S=w/C,T=p-C/2/k,N=g-C/2/A,R=[T*Math.cos(-c.angle)-N*Math.sin(-c.angle),N*Math.cos(-c.angle)+T*Math.sin(-c.angle)];T=R[0],N=R[1],c.x=_.x-T*S,c.y=_.y+N*S,n.setState(c)}this.emit("touchmove",iu(e,this.container))}}}]),t}(ih);function ig(e){return function(e){if(Array.isArray(e))return t9(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var im=function(){function e(t,r){tQ(this,e),this.key=t,this.size=r}return t2(e,null,[{key:"compare",value:function(e,t){return e.size>t.size?-1:e.size<t.size||e.key>t.key?1:-1}}]),e}(),iv=function(){function e(){tQ(this,e),rm(this,"width",0),rm(this,"height",0),rm(this,"cellSize",0),rm(this,"columns",0),rm(this,"rows",0),rm(this,"cells",{})}return t2(e,[{key:"resizeAndClear",value:function(e,t){this.width=e.width,this.height=e.height,this.cellSize=t,this.columns=Math.ceil(e.width/t),this.rows=Math.ceil(e.height/t),this.cells={}}},{key:"getIndex",value:function(e){var t=Math.floor(e.x/this.cellSize);return Math.floor(e.y/this.cellSize)*this.columns+t}},{key:"add",value:function(e,t,r){var i=new im(e,t),n=this.getIndex(r),o=this.cells[n];o||(o=[],this.cells[n]=o),o.push(i)}},{key:"organize",value:function(){for(var e in this.cells)this.cells[e].sort(im.compare)}},{key:"getLabelsToDisplay",value:function(e,t){var r=this.cellSize*this.cellSize,i=Math.ceil(r/e/e*t/r),n=[];for(var o in this.cells)for(var a=this.cells[o],s=0;s<Math.min(i,a.length);s++)n.push(a[s].key);return n}}]),e}(),iy=Object.prototype.hasOwnProperty,ib=function(e){function t(e,r){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(tQ(this,t),rm(t5(n=t4(this,t)),"elements",{}),rm(t5(n),"canvasContexts",{}),rm(t5(n),"webGLContexts",{}),rm(t5(n),"pickingLayers",new Set),rm(t5(n),"textures",{}),rm(t5(n),"frameBuffers",{}),rm(t5(n),"activeListeners",{}),rm(t5(n),"labelGrid",new iv),rm(t5(n),"nodeDataCache",{}),rm(t5(n),"edgeDataCache",{}),rm(t5(n),"nodeProgramIndex",{}),rm(t5(n),"edgeProgramIndex",{}),rm(t5(n),"nodesWithForcedLabels",new Set),rm(t5(n),"edgesWithForcedLabels",new Set),rm(t5(n),"nodeExtent",{x:[0,1],y:[0,1]}),rm(t5(n),"nodeZExtent",[1/0,-1/0]),rm(t5(n),"edgeZExtent",[1/0,-1/0]),rm(t5(n),"matrix",rJ()),rm(t5(n),"invMatrix",rJ()),rm(t5(n),"correctionRatio",1),rm(t5(n),"customBBox",null),rm(t5(n),"normalizationFunction",r8({x:[0,1],y:[0,1]})),rm(t5(n),"graphToViewportRatio",1),rm(t5(n),"itemIDsIndex",{}),rm(t5(n),"nodeIndices",{}),rm(t5(n),"edgeIndices",{}),rm(t5(n),"width",0),rm(t5(n),"height",0),rm(t5(n),"pixelRatio",r5()),rm(t5(n),"pickingDownSizingRatio",2*n.pixelRatio),rm(t5(n),"displayedNodeLabels",new Set),rm(t5(n),"displayedEdgeLabels",new Set),rm(t5(n),"highlightedNodes",new Set),rm(t5(n),"hoveredNode",null),rm(t5(n),"hoveredEdge",null),rm(t5(n),"renderFrame",null),rm(t5(n),"renderHighlightedNodesFrame",null),rm(t5(n),"needToProcess",!1),rm(t5(n),"checkEdgesEventsFrame",null),rm(t5(n),"nodePrograms",{}),rm(t5(n),"nodeHoverPrograms",{}),rm(t5(n),"edgePrograms",{}),n.settings=((i=r9({},ie,o)).nodeProgramClasses=r9({},it,i.nodeProgramClasses),i.edgeProgramClasses=r9({},ir,i.edgeProgramClasses),i),ii(n.settings),function(e){if(!rZ()(e))throw Error("Sigma: invalid graph instance.");e.forEachNode(function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}(e),!(r instanceof HTMLElement))throw Error("Sigma: container should be an html element.");for(var a in n.graph=e,n.container=r,n.createWebGLContext("edges",{picking:o.enableEdgeEvents}),n.createCanvasContext("edgeLabels"),n.createWebGLContext("nodes",{picking:!0}),n.createCanvasContext("labels"),n.createCanvasContext("hovers"),n.createWebGLContext("hoverNodes"),n.createCanvasContext("mouse"),n.resize(),n.settings.nodeProgramClasses){var s=n.settings.nodeProgramClasses[a];n.nodePrograms[a]=new s(n.webGLContexts.nodes,n.frameBuffers.nodes,t5(n));var d=s;a in n.settings.nodeHoverProgramClasses&&(d=n.settings.nodeHoverProgramClasses[a]),n.nodeHoverPrograms[a]=new d(n.webGLContexts.hoverNodes,null,t5(n))}for(var u in n.settings.edgeProgramClasses){var l=n.settings.edgeProgramClasses[u];n.edgePrograms[u]=new l(n.webGLContexts.edges,n.frameBuffers.edges,t5(n))}return n.camera=new io,n.bindCameraHandlers(),n.mouseCaptor=new ic(n.elements.mouse,t5(n)),n.touchCaptor=new ip(n.elements.mouse,t5(n)),n.bindEventHandlers(),n.bindGraphHandlers(),n.handleSettingsUpdate(),n.refresh(),n}return t7(t,e),t2(t,[{key:"createCanvas",value:function(e){var t=function(e,t,r){var i=document.createElement(e);if(t)for(var n in t)i.style[n]=t[n];if(r)for(var o in r)i.setAttribute(o,r[o]);return i}("canvas",{position:"absolute"},{class:"sigma-".concat(e)});return this.elements[e]=t,this.container.appendChild(t),t}},{key:"createCanvasContext",value:function(e){var t=this.createCanvas(e);return this.canvasContexts[e]=t.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this}},{key:"createWebGLContext",value:function(e,t){var r,i=this.createCanvas(e);null!=t&&t.hidden&&i.remove();var n=ry({preserveDrawingBuffer:!1,antialias:!1},t||{});(r=i.getContext("webgl2",n))||(r=i.getContext("webgl",n)),r||(r=i.getContext("experimental-webgl",n));var o=r;if(this.webGLContexts[e]=o,o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),null!=t&&t.picking){this.pickingLayers.add(e);var a=o.createFramebuffer();if(!a)throw Error("Sigma: cannot create a new frame buffer for layer ".concat(e));this.frameBuffers[e]=a}return this}},{key:"resetWebGLTexture",value:function(e){var t=this.webGLContexts[e],r=this.frameBuffers[e],i=this.textures[e];i&&t.deleteTexture(i);var n=t.createTexture();return t.bindFramebuffer(t.FRAMEBUFFER,r),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.textures[e]=n,this}},{key:"bindCameraHandlers",value:function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(e){var t=e.x,r=e.y,i=rg(this.webGLContexts.nodes,this.frameBuffers.nodes,t,r,this.pixelRatio,this.pickingDownSizingRatio),n=rp.apply(void 0,ig(i)),o=this.itemIDsIndex[n];return o&&"node"===o.type?o.id:null}},{key:"bindEventHandlers",value:function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(t){var r={event:t,preventSigmaDefault:function(){t.preventSigmaDefault()}},i=e.getNodeAtPosition(t);if(i&&e.hoveredNode!==i&&!e.nodeDataCache[i].hidden){e.hoveredNode&&e.emit("leaveNode",ry(ry({},r),{},{node:e.hoveredNode})),e.hoveredNode=i,e.emit("enterNode",ry(ry({},r),{},{node:i})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode&&e.getNodeAtPosition(t)!==e.hoveredNode){var n=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",ry(ry({},r),{},{node:n})),e.scheduleHighlightedNodesRender();return}if(e.settings.enableEdgeEvents){var o=e.hoveredNode?null:e.getEdgeAtPoint(r.event.x,r.event.y);o!==e.hoveredEdge&&(e.hoveredEdge&&e.emit("leaveEdge",ry(ry({},r),{},{edge:e.hoveredEdge})),o&&e.emit("enterEdge",ry(ry({},r),{},{edge:o})),e.hoveredEdge=o)}},this.activeListeners.handleLeave=function(t){var r={event:t,preventSigmaDefault:function(){t.preventSigmaDefault()}};e.hoveredNode&&(e.emit("leaveNode",ry(ry({},r),{},{node:e.hoveredNode})),e.scheduleHighlightedNodesRender()),e.settings.enableEdgeEvents&&e.hoveredEdge&&(e.emit("leaveEdge",ry(ry({},r),{},{edge:e.hoveredEdge})),e.scheduleHighlightedNodesRender()),e.emit("leaveStage",ry({},r))},this.activeListeners.handleEnter=function(t){e.emit("enterStage",ry({},{event:t,preventSigmaDefault:function(){t.preventSigmaDefault()}}))};var t=function(t){return function(r){var i={event:r,preventSigmaDefault:function(){r.preventSigmaDefault()}},n=r.original.isFakeSigmaMouseEvent?e.getNodeAtPosition(r):e.hoveredNode;if(n)return e.emit("".concat(t,"Node"),ry(ry({},i),{},{node:n}));if(e.settings.enableEdgeEvents){var o=e.getEdgeAtPoint(r.x,r.y);if(o)return e.emit("".concat(t,"Edge"),ry(ry({},i),{},{edge:o}))}return e.emit("".concat(t,"Stage"),i)}};return this.activeListeners.handleClick=t("click"),this.activeListeners.handleRightClick=t("rightClick"),this.activeListeners.handleDoubleClick=t("doubleClick"),this.activeListeners.handleWheel=t("wheel"),this.activeListeners.handleDown=t("down"),this.activeListeners.handleUp=t("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this}},{key:"bindGraphHandlers",value:function(){var e=this,t=this.graph,r=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(i){var n,o=null===(n=i.hints)||void 0===n?void 0:n.attributes;e.graph.forEachNode(function(t){return e.updateNode(t)});var a=!o||o.some(function(e){return r.has(e)});e.refresh({partialGraph:{nodes:t.nodes()},skipIndexation:!a,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(r){var i,n=null===(i=r.hints)||void 0===i?void 0:i.attributes;e.graph.forEachEdge(function(t){return e.updateEdge(t)});var o=n&&["zIndex","type"].some(function(e){return null==n?void 0:n.includes(e)});e.refresh({partialGraph:{edges:t.edges()},skipIndexation:!o,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(t){var r=t.key;e.addNode(r),e.refresh({partialGraph:{nodes:[r]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(t){var r=t.key;e.refresh({partialGraph:{nodes:[r]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(t){var r=t.key;e.removeNode(r),e.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(t){var r=t.key;e.addEdge(r),e.refresh({partialGraph:{edges:[r]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(t){var r=t.key;e.refresh({partialGraph:{edges:[r]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(t){var r=t.key;e.removeEdge(r),e.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){e.clearEdgeState(),e.clearEdgeIndices(),e.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){e.clearEdgeState(),e.clearNodeState(),e.clearEdgeIndices(),e.clearNodeIndices(),e.refresh({schedule:!0})},t.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),t.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),t.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),t.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),t.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),t.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),t.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),t.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(e,t){var r=rg(this.webGLContexts.edges,this.frameBuffers.edges,e,t,this.pixelRatio,this.pickingDownSizingRatio),i=rp.apply(void 0,ig(r)),n=this.itemIDsIndex[i];return n&&"edge"===n.type?n.id:null}},{key:"process",value:function(){var e=this,t=this.graph,r=this.settings,i=this.getDimensions();this.nodeExtent=function(e){if(!e.order)return{x:[0,1],y:[0,1]};var t=1/0,r=-1/0,i=1/0,n=-1/0;return e.forEachNode(function(e,o){var a=o.x,s=o.y;a<t&&(t=a),a>r&&(r=a),s<i&&(i=s),s>n&&(n=s)}),{x:[t,r],y:[i,n]}}(this.graph),this.normalizationFunction=r8(this.customBBox||this.nodeExtent);var n=r6(new io().getState(),i,this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.labelGrid.resizeAndClear(i,r.labelGridCellSize);for(var o={},a={},s={},d={},u=1,l=t.nodes(),h=0,c=l.length;h<c;h++){var f=l[h],p=this.nodeDataCache[f],g=t.getNodeAttributes(f);p.x=g.x,p.y=g.y,this.normalizationFunction.applyTo(p),"string"!=typeof p.label||p.hidden||this.labelGrid.add(f,p.size,this.framedGraphToViewport(p,{matrix:n})),o[p.type]=(o[p.type]||0)+1}for(var m in this.labelGrid.organize(),this.nodePrograms){if(!iy.call(this.nodePrograms,m))throw Error('Sigma: could not find a suitable program for node type "'.concat(m,'"!'));this.nodePrograms[m].reallocate(o[m]||0),o[m]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(l=r4(this.nodeZExtent,function(t){return e.nodeDataCache[t].zIndex},l));for(var v=0,y=l.length;v<y;v++){var b=l[v];a[b]=u,d[a[b]]={type:"node",id:b},u++;var x=this.nodeDataCache[b];this.addNodeToProgram(b,a[b],o[x.type]++)}for(var w={},E=t.edges(),_=0,C=E.length;_<C;_++){var k=E[_],A=this.edgeDataCache[k];w[A.type]=(w[A.type]||0)+1}for(var S in this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(E=r4(this.edgeZExtent,function(t){return e.edgeDataCache[t].zIndex},E)),this.edgePrograms){if(!iy.call(this.edgePrograms,S))throw Error('Sigma: could not find a suitable program for edge type "'.concat(S,'"!'));this.edgePrograms[S].reallocate(w[S]||0),w[S]=0}for(var T=0,N=E.length;T<N;T++){var R=E[T];s[R]=u,d[s[R]]={type:"edge",id:R},u++;var L=this.edgeDataCache[R];this.addEdgeToProgram(R,s[R],w[L.type]++)}return this.itemIDsIndex=d,this.nodeIndices=a,this.edgeIndices=s,this}},{key:"handleSettingsUpdate",value:function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),t=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);r7(t,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var r=this.canvasContexts.labels,i=0,n=t.length;i<n;i++){var o=t[i],a=this.nodeDataCache[o];if(!this.displayedNodeLabels.has(o)&&!a.hidden){var s=this.framedGraphToViewport(a),d=s.x,u=s.y,l=this.scaleSize(a.size);if((a.forceLabel||!(l<this.settings.labelRenderedSizeThreshold))&&!(d<-150)&&!(d>this.width+150)&&!(u<-50)&&!(u>this.height+50)){this.displayedNodeLabels.add(o);var h=this.settings.defaultDrawNodeLabel,c=this.nodePrograms[a.type];((null==c?void 0:c.drawLabel)||h)(r,ry(ry({key:o},a),{},{size:l,x:d,y:u}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var e,t,r,i,n,o,a=this.canvasContexts.edgeLabels;a.clearRect(0,0,this.width,this.height);var s=(t=(e={graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes}).graph,r=e.hoveredNode,i=e.highlightedNodes,n=e.displayedNodeLabels,o=[],t.forEachEdge(function(e,t,a,s){(a===r||s===r||i.has(a)||i.has(s)||n.has(a)&&n.has(s))&&o.push(e)}),o);r7(s,this.edgesWithForcedLabels);for(var d=new Set,u=0,l=s.length;u<l;u++){var h=s[u],c=this.graph.extremities(h),f=this.nodeDataCache[c[0]],p=this.nodeDataCache[c[1]],g=this.edgeDataCache[h];if(!d.has(h)){if(g.hidden||f.hidden||p.hidden)continue;var m=this.settings.defaultDrawEdgeLabel,v=this.edgePrograms[g.type];((null==v?void 0:v.drawLabel)||m)(a,ry(ry({key:h},g),{},{size:this.scaleSize(g.size)}),ry(ry(ry({key:c[0]},f),this.framedGraphToViewport(f)),{},{size:this.scaleSize(f.size)}),ry(ry(ry({key:c[1]},p),this.framedGraphToViewport(p)),{},{size:this.scaleSize(p.size)}),this.settings),d.add(h)}}return this.displayedEdgeLabels=d,this}},{key:"renderHighlightedNodes",value:function(){var e=this,t=this.canvasContexts.hovers;t.clearRect(0,0,this.width,this.height);var r=function(r){var i=e.nodeDataCache[r],n=e.framedGraphToViewport(i),o=n.x,a=n.y,s=e.scaleSize(i.size),d=e.settings.defaultDrawNodeHover,u=e.nodePrograms[i.type];((null==u?void 0:u.drawHover)||d)(t,ry(ry({key:r},i),{},{size:s,x:o,y:a}),e.settings)},i=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&i.push(this.hoveredNode),this.highlightedNodes.forEach(function(t){t!==e.hoveredNode&&i.push(t)}),i.forEach(function(e){return r(e)});var n={};for(var o in i.forEach(function(t){var r=e.nodeDataCache[t].type;n[r]=(n[r]||0)+1}),this.nodeHoverPrograms)this.nodeHoverPrograms[o].reallocate(n[o]||0),n[o]=0;for(var a in i.forEach(function(t){var r=e.nodeDataCache[t];e.nodeHoverPrograms[r.type].process(0,n[r.type]++,r)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.nodeHoverPrograms)this.nodeHoverPrograms[a].render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,cameraAngle:this.camera.angle,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio})}},{key:"scheduleHighlightedNodesRender",value:function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))}},{key:"render",value:function(){var e,t=this;this.emit("beforeRender");var r=function(){return t.emit("afterRender"),t};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(e){return t.resetWebGLTexture(e)}),!this.graph.order)return r();var i=this.mouseCaptor,n=this.camera.isAnimated()||i.isMoving||i.draggedEvents||i.currentWheelDirection,o=this.camera.getState(),a=this.getDimensions(),s=this.getGraphDimensions(),d=this.getSetting("stagePadding")||0;this.matrix=r6(o,a,s,d),this.invMatrix=r6(o,a,s,d,!0),this.correctionRatio=1/Math.sqrt(Math.pow((e=r3(this.matrix,{x:Math.cos(o.angle),y:Math.sin(o.angle)},0)).x,2)+Math.pow(e.y,2))/a.width,this.graphToViewportRatio=this.getGraphToViewportRatio();var u={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio};for(var l in this.nodePrograms)this.nodePrograms[l].render(u);if(!this.settings.hideEdgesOnMove||!n)for(var h in this.edgePrograms)this.edgePrograms[h].render(u);return this.settings.hideLabelsOnMove&&n||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(e){var t=Object.assign({},this.graph.getNodeAttributes(e));this.settings.nodeReducer&&(t=this.settings.nodeReducer(e,t));var r=function(e,t,r){if(!iy.call(r,"x")||!iy.call(r,"y"))throw Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return r.color||(r.color=e.defaultNodeColor),r.label||""===r.label||(r.label=null),void 0!==r.label&&null!==r.label?r.label=""+r.label:r.label=null,r.size||(r.size=2),iy.call(r,"hidden")||(r.hidden=!1),iy.call(r,"highlighted")||(r.highlighted=!1),iy.call(r,"forceLabel")||(r.forceLabel=!1),r.type&&""!==r.type||(r.type=e.defaultNodeType),r.zIndex||(r.zIndex=0),r}(this.settings,e,t);this.nodeDataCache[e]=r,this.nodesWithForcedLabels.delete(e),r.forceLabel&&!r.hidden&&this.nodesWithForcedLabels.add(e),this.highlightedNodes.delete(e),r.highlighted&&!r.hidden&&this.highlightedNodes.add(e),this.settings.zIndex&&(r.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=r.zIndex),r.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=r.zIndex))}},{key:"updateNode",value:function(e){this.addNode(e);var t=this.nodeDataCache[e];this.normalizationFunction.applyTo(t)}},{key:"removeNode",value:function(e){delete this.nodeDataCache[e],delete this.nodeProgramIndex[e],this.highlightedNodes.delete(e),this.hoveredNode===e&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(e)}},{key:"addEdge",value:function(e){var t,r,i=Object.assign({},this.graph.getEdgeAttributes(e));this.settings.edgeReducer&&(i=this.settings.edgeReducer(e,i));var n=(t=this.settings,(r=i).color||(r.color=t.defaultEdgeColor),r.label||(r.label=""),r.size||(r.size=.5),iy.call(r,"hidden")||(r.hidden=!1),iy.call(r,"forceLabel")||(r.forceLabel=!1),r.type&&""!==r.type||(r.type=t.defaultEdgeType),r.zIndex||(r.zIndex=0),r);this.edgeDataCache[e]=n,this.edgesWithForcedLabels.delete(e),n.forceLabel&&!n.hidden&&this.edgesWithForcedLabels.add(e),this.settings.zIndex&&(n.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=n.zIndex),n.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=n.zIndex))}},{key:"updateEdge",value:function(e){this.addEdge(e)}},{key:"removeEdge",value:function(e){delete this.edgeDataCache[e],delete this.edgeProgramIndex[e],this.hoveredEdge===e&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(e)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new iv,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(e,t,r){var i=this.nodeDataCache[e],n=this.nodePrograms[i.type];if(!n)throw Error('Sigma: could not find a suitable program for node type "'.concat(i.type,'"!'));n.process(t,r,i),this.nodeProgramIndex[e]=r}},{key:"addEdgeToProgram",value:function(e,t,r){var i=this.edgeDataCache[e],n=this.edgePrograms[i.type];if(!n)throw Error('Sigma: could not find a suitable program for edge type "'.concat(i.type,'"!'));var o=this.graph.extremities(e),a=this.nodeDataCache[o[0]],s=this.nodeDataCache[o[1]];n.process(t,r,a,s,i),this.edgeProgramIndex[e]=r}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(e){e!==this.graph&&(this.unbindGraphHandlers(),null!==this.checkEdgesEventsFrame&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}}},{key:"getNodeDisplayData",value:function(e){var t=this.nodeDataCache[e];return t?Object.assign({},t):void 0}},{key:"getEdgeDisplayData",value:function(e){var t=this.edgeDataCache[e];return t?Object.assign({},t):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return ry({},this.settings)}},{key:"getSetting",value:function(e){return this.settings[e]}},{key:"setSetting",value:function(e,t){return this.settings[e]=t,ii(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(e,t){return this.settings[e]=t(this.settings[e]),ii(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this}},{key:"resize",value:function(){var e=this.width,t=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=r5(),0===this.width){if(this.settings.allowInvalidContainer)this.width=1;else throw Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.")}if(0===this.height){if(this.settings.allowInvalidContainer)this.height=1;else throw Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.")}if(e===this.width&&t===this.height)return this;for(var r in this.emit("resize"),this.elements){var i=this.elements[r];i.style.width=this.width+"px",i.style.height=this.height+"px"}for(var n in this.canvasContexts)this.elements[n].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[n].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[n].scale(this.pixelRatio,this.pixelRatio);for(var o in this.webGLContexts){this.elements[o].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[o].setAttribute("height",this.height*this.pixelRatio+"px");var a=this.webGLContexts[o];if(a.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(o)){var s=this.textures[o];s&&a.deleteTexture(s)}}return this}},{key:"clear",value:function(){return this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this}},{key:"refresh",value:function(e){var t=this,r=(null==e?void 0:e.skipIndexation)!==void 0&&(null==e?void 0:e.skipIndexation),i=(null==e?void 0:e.schedule)!==void 0&&e.schedule,n=!e||!e.partialGraph;if(n)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(e){return t.addNode(e)}),this.graph.forEachEdge(function(e){return t.addEdge(e)});else{for(var o,a,s=(null===(o=e.partialGraph)||void 0===o?void 0:o.nodes)||[],d=0,u=(null==s?void 0:s.length)||0;d<u;d++){var l=s[d];if(this.updateNode(l),r){var h=this.nodeProgramIndex[l];if(void 0===h)throw Error('Sigma: node "'.concat(l,"\" can't be repaint"));this.addNodeToProgram(l,this.nodeIndices[l],h)}}for(var c=(null==e||null===(a=e.partialGraph)||void 0===a?void 0:a.edges)||[],f=0,p=c.length;f<p;f++){var g=c[f];if(this.updateEdge(g),r){var m=this.edgeProgramIndex[g];if(void 0===m)throw Error('Sigma: edge "'.concat(g,"\" can't be repaint"));this.addEdgeToProgram(g,this.edgeIndices[g],m)}}}return(n||!r)&&(this.needToProcess=!0),i?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var e=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){e.render()})),this}},{key:"scheduleRefresh",value:function(e){return this.refresh(ry(ry({},e),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(e,t){var r=this.camera.getState(),i=r.ratio,n=r.angle,o=r.x,a=r.y,s=t/i,d={x:this.width/2,y:this.height/2},u=this.viewportToFramedGraph(e),l=this.viewportToFramedGraph(d);return{angle:n,x:(u.x-l.x)*(1-s)+o,y:(u.y-l.y)*(1-s)+a,ratio:t}}},{key:"viewRectangle",value:function(){var e=0*this.width/8,t=0*this.height/8,r=this.viewportToFramedGraph({x:0-e,y:0-t}),i=this.viewportToFramedGraph({x:this.width+e,y:0-t}),n=this.viewportToFramedGraph({x:0,y:this.height+t});return{x1:r.x,y1:r.y,x2:i.x,y2:i.y,height:i.y-n.y}}},{key:"framedGraphToViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!!t.cameraState||!!t.viewportDimensions||!!t.graphDimensions,i=r3(t.matrix?t.matrix:r?r6(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getSetting("stagePadding")||0):this.matrix,e);return{x:(1+i.x)*this.width/2,y:(1-i.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!!t.cameraState||!!t.viewportDimensions||!t.graphDimensions,i=r3(t.matrix?t.matrix:r?r6(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(i.x)&&(i.x=0),isNaN(i.y)&&(i.y=0),i}},{key:"viewportToGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(e,t))}},{key:"graphToViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(e),t)}},{key:"getGraphToViewportRatio",value:function(){var e={x:0,y:0},t={x:1,y:1},r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),i=this.graphToViewport(e),n=this.graphToViewport(t);return Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2))/r}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(e){return this.customBBox=e,this.scheduleRender(),this}},{key:"kill",value:function(){for(var e in this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null),this.webGLContexts){var t;null===(t=this.webGLContexts[e].getExtension("WEBGL_lose_context"))||void 0===t||t.loseContext()}for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild);for(var i in this.canvasContexts={},this.webGLContexts={},this.elements={},this.nodePrograms)this.nodePrograms[i].kill();for(var n in this.nodeHoverPrograms)this.nodeHoverPrograms[n].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={}}},{key:"scaleSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.camera.ratio;return e/this.settings.zoomToSizeRatioFunction(t)*("positions"===this.getSetting("itemSizesReference")?t*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){return ry({},this.elements)}}]),t}(rq),ix=WebGLRenderingContext;ix.UNSIGNED_BYTE,ix.FLOAT;var iw=WebGLRenderingContext,iE=iw.UNSIGNED_BYTE,i_=iw.FLOAT,iC=["u_matrix"],ik=function(e){function t(){return tQ(this,t),t4(this,t,arguments)}return t7(t,e),t2(t,[{key:"getDefinition",value:function(){return{VERTICES:2,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  // Scale from [[-1 1] [-1 1]] to the container:\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n",METHOD:WebGLRenderingContext.LINES,UNIFORMS:iC,ATTRIBUTES:[{name:"a_position",size:2,type:i_},{name:"a_color",size:4,type:iE,normalized:!0},{name:"a_id",size:4,type:iE,normalized:!0}]}}},{key:"processVisibleItem",value:function(e,t,r,i,n){var o=this.array,a=r.x,s=r.y,d=i.x,u=i.y,l=rh(n.color);o[t++]=a,o[t++]=s,o[t++]=l,o[t++]=e,o[t++]=d,o[t++]=u,o[t++]=l,o[t++]=e}},{key:"setUniforms",value:function(e,t){var r=t.gl,i=t.uniformLocations.u_matrix;r.uniformMatrix3fv(i,!1,e.matrix)}}]),t}(rk),iA=WebGLRenderingContext;function iS(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function iT(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function iN(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,iT(i.key),i)}}function iR(e,t,r){return t&&iN(e.prototype,t),r&&iN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iL(e){return(iL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(iD=function(){return!!e})()}function iG(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iF(e,t,r){return t=iL(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return iG(e)}(e,iD()?Reflect.construct(t,r||[],iL(e).constructor):t.apply(e,r))}function ij(){return(ij="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iL(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function iz(e,t){return(iz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iM(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iz(e,t)}function iP(e,t,r){return(t=iT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function iO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iI(Object(r),!0).forEach(function(t){iP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}iA.UNSIGNED_BYTE,iA.FLOAT;var iU="\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\nvarying vec4 v_texture;\n\nuniform sampler2D u_atlas;\nuniform float u_correctionRatio;\nuniform float u_cameraAngle;\nuniform float u_percentagePadding;\nuniform bool u_colorizeImages;\nuniform bool u_keepWithinCircle;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nconst float radius = 0.5;\n\nvoid main(void) {\n  float border = 2.0 * u_correctionRatio;\n  float dist = length(v_diffVector);\n  vec4 color = gl_FragColor;\n\n  float c = cos(-u_cameraAngle);\n  float s = sin(-u_cameraAngle);\n  vec2 diffVector = mat2(c, s, -s, c) * (v_diffVector);\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  border = 0.0;\n  color = v_color;\n\n  #else\n  // First case: No image to display\n  if (v_texture.w <= 0.0) {\n    if (!u_colorizeImages) {\n      color = v_color;\n    }\n  }\n\n  // Second case: Image loaded into the texture\n  else {\n    float paddingRatio = 1.0 + 2.0 * u_percentagePadding;\n    float coef = u_keepWithinCircle ? 1.0 : ".concat(Math.SQRT2,';\n    vec2 coordinateInTexture = diffVector * vec2(paddingRatio, -paddingRatio) / v_radius / 2.0 * coef + vec2(0.5, 0.5);\n    vec4 texel = texture2D(u_atlas, (v_texture.xy + coordinateInTexture * v_texture.zw), -1.0);\n\n    // Colorize all visible image pixels:\n    if (u_colorizeImages) {\n      color = mix(gl_FragColor, v_color, texel.a);\n    }\n\n    // Colorize background pixels, keep image pixel colors:\n    else {\n      color = vec4(mix(v_color, texel, texel.a).rgb, max(texel.a, v_color.a));\n    }\n\n    // Erase pixels "in the padding":\n    if (abs(diffVector.x) > v_radius / paddingRatio || abs(diffVector.y) > v_radius / paddingRatio) {\n      color = u_colorizeImages ? gl_FragColor : v_color;\n    }\n  }\n  #endif\n\n  // Crop in a circle when u_keepWithinCircle is truthy:\n  if (u_keepWithinCircle) {\n    if (dist < v_radius - border) {\n      gl_FragColor = color;\n    } else if (dist < v_radius) {\n      gl_FragColor = mix(transparent, color, (v_radius - dist) / border);\n    }\n  }\n\n  // Crop in a square else:\n  else {\n    float squareHalfSize = v_radius * ').concat(Math.SQRT1_2*Math.cos(Math.PI/12),";\n    if (abs(diffVector.x) > squareHalfSize || abs(diffVector.y) > squareHalfSize) {\n      gl_FragColor = transparent;\n    } else {\n      gl_FragColor = color;\n    }\n  }\n}\n");function i$(){i$=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(t,r,i,o){var a,s,d=Object.create((r&&r.prototype instanceof m?r:m).prototype);return n(d,"_invoke",{value:(a=new S(o||[]),s=c,function(r,n){if(s===f)throw Error("Generator is already running");if(s===p){if("throw"===r)throw n;return{value:e,done:!0}}for(a.method=r,a.arg=n;;){var o=a.delegate;if(o){var d=function t(r,i){var n=i.method,o=r.iterator[n];if(o===e)return i.delegate=null,"throw"===n&&r.iterator.return&&(i.method="return",i.arg=e,t(r,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,r.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,g;var s=a.arg;return s?s.done?(i[r.resultName]=s.value,i.next=r.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,g):s:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,g)}(o,a);if(d){if(d===g)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===c)throw s=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=f;var u=h(t,i,a);if("normal"===u.type){if(s=a.done?p:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(s=p,a.method="throw",a.arg=u.arg)}})}),d}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var c="suspendedStart",f="executing",p="completed",g={};function m(){}function v(){}function y(){}var b={};u(b,a,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(T([])));w&&w!==r&&i.call(w,a)&&(b=w);var E=y.prototype=m.prototype=Object.create(b);function _(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function C(e,t){var r;n(this,"_invoke",{value:function(n,o){function a(){return new t(function(r,a){!function r(n,o,a,s){var d=h(e[n],e,o);if("throw"!==d.type){var u=d.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(l).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,s)})}s(d.arg)}(n,o,r,a)})}return r=r?r.then(a,a):a()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw TypeError(typeof t+" is not iterable")}return v.prototype=y,n(E,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,d,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},_(C.prototype),u(C.prototype,s,function(){return this}),t.AsyncIterator=C,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var a=new C(l(e,r,i,n),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(E),u(E,d,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return s.type="throw",s.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var d=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(d&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(d){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:T(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function iB(e,t,r,i,n,o,a){try{var s=e[o](a),d=s.value}catch(e){r(e);return}s.done?t(d):Promise.resolve(d).then(i,n)}function iW(e){return function(){var t=this,r=arguments;return new Promise(function(i,n){var o=e.apply(t,r);function a(e){iB(o,i,n,a,s,"next",e)}function s(e){iB(o,i,n,a,s,"throw",e)}a(void 0)})}}var iH={size:{mode:"max",value:512},objectFit:"cover",correctCentering:!1};function iV(e){return new Promise(function(t,r){var i=new Image;i.addEventListener("load",function(){t(i)},{once:!0}),i.addEventListener("error",function(e){r(e.error)},{once:!0}),i.setAttribute("crossOrigin",""),i.src=e})}function iq(){return(iq=iW(i$().mark(function e(t){var r,i,n,o,a,s,d,u,l,h,c=arguments;return i$().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(c.length>1&&void 0!==c[1]?c[1]:{}).size,e.next=3,fetch(t);case 3:return i=e.sent,e.next=6,i.text();case 6:if(n=e.sent,s=(a=(o=new DOMParser().parseFromString(n,"image/svg+xml")).documentElement).getAttribute("width"),d=a.getAttribute("height"),!(!s||!d)){e.next=13;break}throw Error("loadSVGImage: cannot use `size` if target SVG has no definite dimensions.");case 13:return"number"==typeof r&&(a.setAttribute("width",""+r),a.setAttribute("height",""+r)),u=new Blob([new XMLSerializer().serializeToString(o)],{type:"image/svg+xml"}),(h=iV(l=URL.createObjectURL(u))).finally(function(){return URL.revokeObjectURL(l)}),e.abrupt("return",h);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function iY(){return(iY=iW(i$().mark(function e(t){var r,i,n,o=arguments;return i$().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(o.length>1&&void 0!==o[1]?o[1]:{}).size,!((null===(r=t.split(/[#?]/)[0].split(".").pop())||void 0===r?void 0:r.trim().toLowerCase())==="svg"&&i)){e.next=16;break}return e.prev=3,e.next=6,function(e){return iq.apply(this,arguments)}(t,{size:i});case 6:n=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),e.next=13,iV(t);case 13:n=e.sent;case 14:e.next=19;break;case 16:return e.next=18,iV(t);case 18:n=e.sent;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}var iZ=function(){function e(){iS(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",{willReadFrequently:!0})}return iR(e,[{key:"getCorrectionOffset",value:function(e,t){this.canvas.width=t,this.canvas.height=t,this.context.clearRect(0,0,t,t),this.context.drawImage(e,0,0,t,t);for(var r=this.context.getImageData(0,0,t,t).data,i=new Uint8ClampedArray(r.length/4),n=0;n<r.length;n++)i[n]=r[4*n+3];for(var o=0,a=0,s=0,d=0;d<t;d++)for(var u=0;u<t;u++){var l=i[d*t+u];s+=l,o+=l*u,a+=l*d}return{x:o/s-t/2,y:a/s-t/2}}}]),e}(),iK=function(e){var t;function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return iS(this,r),iP(iG(e=iF(this,r)),"canvas",document.createElement("canvas")),iP(iG(e),"ctx",e.canvas.getContext("2d",{willReadFrequently:!0})),iP(iG(e),"corrector",new iZ),iP(iG(e),"imageStates",{}),iP(iG(e),"texture",e.ctx.getImageData(0,0,1,1)),iP(iG(e),"atlas",{}),e.options=iO(iO({},iH),t),e}return iM(r,e),iR(r,[{key:"scheduleGenerateTexture",value:function(){var e=this;"number"!=typeof this.frameId&&(this.frameId=window.setTimeout(function(){e.generateTexture(),e.frameId=void 0},100))}},{key:"generateTexture",value:function(){this.atlas=function(e,t){var r=[],i=0,n=0;for(var o in t){var a=t[o];"ready"===a.status&&(n=Math.max(n,a.destinationSize),i+=Math.pow(a.destinationSize,2),r.push(iO({key:o},a)))}r.sort(function(e,t){return e.destinationSize>t.destinationSize?-1:1});for(var s=Math.min(Math.max(Math.sqrt(i/.6),n),3072),d=[],u=0,l=0,h=0,c=0,f={},p=0,g=r.length;p<g;p++){var m=r[p],v=m.key,y=m.image,b=m.sourceSize,x=m.sourceX,w=m.sourceY,E=m.destinationSize,_=E+1;u+_>s&&(c=Math.max(c,u),u=0,l+=h,h=_),d.push({key:v,image:y,sourceX:x,sourceY:w,sourceSize:b,destinationX:u,destinationY:l,destinationSize:E}),f[v]={x:u,y:l,size:E},u+=_,h=Math.max(h,_)}c=Math.max(c,u);var C=e.canvas;C.width=c,C.height=l+h;for(var k=0,A=d.length;k<A;k++){var S=d[k],T=S.image,N=S.sourceSize,R=S.sourceX,L=S.sourceY,D=S.destinationSize,G=S.destinationX,F=S.destinationY;e.drawImage(T,R,L,N,N,G,F,D,D)}return f}(this.ctx,this.imageStates),this.texture=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.emit(r.NEW_TEXTURE_EVENT,{atlas:this.atlas,texture:this.texture})}},{key:"registerImage",value:(t=iW(i$().mark(function e(t){var r,i;return i$().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.imageStates[t]){e.next=2;break}return e.abrupt("return");case 2:return this.imageStates[t]={status:"loading"},e.prev=3,r=this.options.size,e.next=7,function(e){return iY.apply(this,arguments)}(t,{size:"force"===r.mode?r.value:void 0});case 7:i=e.sent,this.imageStates[t]=iO({status:"ready",image:i},function(e,t,r){var i=r.objectFit,n=r.size,o=r.correctCentering,a="contain"===i?Math.max(e.width,e.height):Math.min(e.width,e.height),s="auto"===n.mode?a:"force"===n.mode?n.value:Math.min(n.value,a),d=(e.width-a)/2,u=(e.height-a)/2;if(o){var l=t.getCorrectionOffset(e,a);d=l.x,u=l.y}return{sourceX:d,sourceY:u,sourceSize:a,destinationSize:s}}(i,this.corrector,this.options)),this.scheduleGenerateTexture(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),this.imageStates[t]={status:"error"};case 15:case"end":return e.stop()}},e,this,[[3,12]])})),function(e){return t.apply(this,arguments)})},{key:"getAtlas",value:function(){return this.atlas}},{key:"getTexture",value:function(){return this.texture}}]),r}(eQ.EventEmitter);iP(iK,"NEW_TEXTURE_EVENT","newTexture");var iX=["drawHover","drawLabel","drawingMode","keepWithinCircle","padding","colorAttribute"],iJ=WebGLRenderingContext,iQ=iJ.UNSIGNED_BYTE,i0=iJ.FLOAT,i1=iO(iO({},iH),{},{drawingMode:"background",keepWithinCircle:!0,drawLabel:void 0,drawHover:void 0,padding:0,colorAttribute:"color"}),i2=["u_sizeRatio","u_correctionRatio","u_cameraAngle","u_percentagePadding","u_matrix","u_colorizeImages","u_keepWithinCircle","u_atlas"];function i3(e){var t,r=iO(iO(iO({},i1),e||{}),{},{drawLabel:void 0,drawHover:void 0}),i=r.drawHover,n=r.drawLabel,o=r.drawingMode,a=r.keepWithinCircle,s=r.padding,d=r.colorAttribute,u=new iK(function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(r,iX));return iP(t=function(e){function t(e,r,i){var n;return iS(this,t),(n=iF(this,t,[e,r,i])).textureManagerCallback=function(){iG(n)&&(n.bindTexture&&(n.atlas=u.getAtlas(),n.textureImage=u.getTexture(),n.bindTexture(),n.latestRenderParams&&n.render(n.latestRenderParams)),i&&i.refresh&&i.refresh())},u.on(iK.NEW_TEXTURE_EVENT,n.textureManagerCallback),n.atlas=u.getAtlas(),n.textureImage=u.getTexture(),n.texture=e.createTexture(),n.bindTexture(),n}return iM(t,e),iR(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\nattribute vec4 a_texture;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\nvarying vec4 v_texture;\n\nconst float bias = 255.0 / 254.0;\nconst float marginRatio = 1.05;\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector * marginRatio;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_diffVector = diffVector;\n  v_radius = size / 2.0 / marginRatio;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n\n  // Pass the texture coordinates:\n  v_texture = a_texture;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:iU,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:i2,ATTRIBUTES:[{name:"a_position",size:2,type:i0},{name:"a_size",size:1,type:i0},{name:"a_color",size:4,type:iQ,normalized:!0},{name:"a_id",size:4,type:iQ,normalized:!0},{name:"a_texture",size:4,type:i0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:i0}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"kill",value:function(){u.off(iK.NEW_TEXTURE_EVENT,this.textureManagerCallback)}},{key:"bindTexture",value:function(){var e=this.normalProgram.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.textureImage),e.generateMipmap(e.TEXTURE_2D)}},{key:"renderProgram",value:function(e,r){if(!r.isPicking){var i=r.gl;i.bindTexture(i.TEXTURE_2D,this.texture)}ij(iL(t.prototype),"renderProgram",this).call(this,e,r)}},{key:"processVisibleItem",value:function(e,t,r){var i=this.array,n=rh(r[d]),o=r.image,a=o?this.atlas[o]:void 0;if("string"!=typeof o||a||u.registerImage(o),i[t++]=r.x,i[t++]=r.y,i[t++]=r.size,i[t++]=n,i[t++]=e,a){var s=this.textureImage,l=s.width,h=s.height;i[t++]=a.x/l,i[t++]=a.y/h,i[t++]=a.size/l,i[t++]=a.size/h}else i[t++]=0,i[t++]=0,i[t++]=0,i[t++]=0}},{key:"setUniforms",value:function(e,t){var r=t.gl,i=t.uniformLocations,n=i.u_sizeRatio,d=i.u_correctionRatio,u=i.u_matrix,l=i.u_atlas,h=i.u_colorizeImages,c=i.u_keepWithinCircle,f=i.u_cameraAngle,p=i.u_percentagePadding;this.latestRenderParams=e,r.uniform1f(d,e.correctionRatio),r.uniform1f(n,a?e.sizeRatio:e.sizeRatio/Math.SQRT2),r.uniform1f(f,e.cameraAngle),r.uniform1f(p,s),r.uniformMatrix3fv(u,!1,e.matrix),r.uniform1i(l,0),r.uniform1i(h,"color"===o?1:0),r.uniform1i(c,a?1:0)}}]),t}(rC),"ANGLE_1",0),iP(t,"ANGLE_2",2*Math.PI/3),iP(t,"ANGLE_3",4*Math.PI/3),iP(t,"drawLabel",n),iP(t,"drawHover",i),t}var i6=i3();i3({keepWithinCircle:!1,size:{mode:"force",value:256},drawingMode:"color",correctCentering:!0});let i5=({args:e,onNodeClick:t})=>((0,o.useEffect)(()=>{let r=tJ()("sigma"),i={...e},n=tY()(tP,{...i,rng:r});tK().assign(n,{hierarchyAttributes:["cluster"]});let o={};for(let e=0;e<+i.clusters;e++)o[e]="#"+Math.floor(16777215*r()).toString(16);let a=0;n.forEachNode((e,{cluster:t})=>{n.mergeNodeAttributes(e,{size:a/3,color:o[t+""],image:"/logo.webp",hiddenLabel:`Node n\xb0${++a}, in cluster n\xb0${t}`,originalLabel:`Node n\xb0${++a}, in cluster n\xb0${t}`})});let s=new ib(n,document.getElementById("solo-container"),{defaultEdgeColor:"rgba(0,0,0,0)",defaultEdgeType:i.edgesRenderer,edgeProgramClasses:{"edges-default":r$,"edges-fast":ik},edgeLabelWeight:"bold",defaultNodeType:"image",nodeProgramClasses:{image:i6}});return s.getCamera().setState({angle:.2}),s.on("enterNode",({node:e})=>{n.setNodeAttribute(e,"label",n.getNodeAttribute(e,"originalLabel"))}),s.on("clickNode",({node:e,event:r})=>{t(n,e,r)}),s.on("leaveNode",({node:e})=>{n.removeNodeAttribute(e,"label")}),()=>{s.kill()}},[e]),n.jsx("div",{children:n.jsx("div",{id:"solo-container",className:"bg-white rounded-xl",style:{width:"100%",height:"80vh"}})})),i4=()=>(0,eK.a)({queryKey:["quests"],queryFn:async()=>eX.Z.request({method:"get",maxBodyLength:1/0,url:"https://e9xc9ftx7l.execute-api.us-east-1.amazonaws.com/dev/quests",headers:{user_id:"AIDAYEOGDEAXQDTAWY4DO",Accept:"application/json","x-api-key":"DfamlZxOYS9nY89FHtf7Y5ufMLoJkFDs74YaOss1"}}).then(e=>(console.log("useQuests: ",e.data),e.data)).catch(e=>{console.log(e)})}),i8={order:80,size:1,clusters:3,edgesRenderer:"edges-default"},i7=()=>{let[e,t]=(0,o.useState)(!1),[r,i]=(0,o.useState)(null),[a,s]=(0,o.useState)(null),[d,u]=(0,o.useState)({x:0,y:0}),{data:l,isLoading:h}=i4(),{data:c,isLoading:f}=eJ();console.log("questsData",l);let p=(0,o.useMemo)(()=>!c||f?[]:c.groups.map(e=>({id:e.group_name,label:e.group_name,members:e.total_members,points:e.total_points,image:"/logo.webp"})),[f,c]),g=(0,o.useMemo)(()=>!l||h?[]:l,[h,l]);console.log("teams",p);let m=(0,o.useCallback)((e,r,n)=>{let o=e.getNodeAttributes(r);console.log("nodeAttributes",o),i({id:r,label:o.originalLabel,members:o.members,image:o.image,points:o.points}),u({x:n.x,y:n.y}),t(!0)},[]),v=(0,o.useCallback)((e,r,i)=>{let n=e.getNodeAttributes(r);s({id:r,label:n.originalLabel,members:4*n.size,image:n.image,points:0}),u({x:i.x,y:i.y}),t(!0)},[]),y=(0,o.useCallback)(()=>{s(null),i(null),t(!1)},[]);return n.jsx(n.Fragment,{children:n.jsx(H,{defaultValue:"team",children:(0,n.jsxs)("div",{className:"relative rounded-lg overflow-hidden",style:{width:"80vw",height:"80vh"},children:[r&&n.jsx(eZ,{open:!!r&&e,onClose:y,node:r,position:d}),a&&n.jsx(tV,{open:!!a&&e,onClose:y,node:a,position:d}),n.jsx("div",{className:"absolute top-4 left-4 z-40",children:n.jsx(e_,{})}),n.jsx(Q,{value:"team",className:"h-full",children:n.jsx(tH,{onNodeClick:m,nodes:p,isLoading:f})}),n.jsx(Q,{value:"solo",className:"h-full",children:n.jsx(i5,{args:i8,onNodeClick:v})}),n.jsx("div",{className:"absolute top-5 right-5",children:n.jsx(ep,{teamsData:p,isLoading:f})}),(0,n.jsxs)("div",{className:"absolute bottom-4 left-4 flex gap-4 items-center justify-start",children:[n.jsx(eb,{quests:g,isLoading:h}),n.jsx(ex,{teams:p,isLoading:f})]})]})})})}},82631:(e,t,r)=>{"use strict";r.d(t,{_v:()=>l,aJ:()=>u,pn:()=>s,u:()=>d});var i=r(10326),n=r(17577),o=r(73450),a=r(51223);let s=o.zt,d=o.fC,u=o.xz,l=n.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(o.VY,{ref:n,sideOffset:t,className:(0,a.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));l.displayName=o.VY.displayName},43395:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var i=r(19510);r(71159);var n=r(68570);let o=(0,n.createProxy)(String.raw`/Users/rafael/work/buddy-link/buddy-ts-examples/next/sponsaru/src/components/chart.tsx`),{__esModule:a,$$typeof:s}=o;o.default;let d=(0,n.createProxy)(String.raw`/Users/rafael/work/buddy-link/buddy-ts-examples/next/sponsaru/src/components/chart.tsx#default`);function u(){return function(e=300,t=!1){[...Array(e).keys()].map(e=>({id:e})),[...Array(e).keys()].filter(e=>e).map(e=>({[t?"target":"source"]:e,[t?"source":"target"]:Math.round(Math.random()*(e-1))}))}(5e3,!1),i.jsx("main",{className:"flex flex-col items-center justify-between ",children:i.jsx(d,{})})}},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(66621);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,615,717,69,553],()=>r(43637));module.exports=i})();